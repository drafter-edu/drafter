

<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bank Account &#8212; Drafter 1.8.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/cloud.css?v=f9ae72be" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=090ae2a6" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../../_static/documentation_options.js?v=82e6e318"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>

    
    
     
        <script src="../../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../../_static/cloud.base.js"></script>
    

    
     
        <script src="../../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../contents.html">Drafter 1.8.3 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Bank Account</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="bank-account">
<h1>Bank Account<a class="headerlink" href="#bank-account" title="Link to this heading">¶</a></h1>
<p>A bank account let’s you withdraw and deposit money.
We’ll make a simple bank account application to support this.
Preview this website at <a href="https://drafter-edu.github.io/examples/bank/" target="_blank">
    https://drafter-edu.github.io/examples/bank/</a>.</p>
<a class="reference internal image-reference" href="../../_images/drafter_preview.png"><img alt="Screenshot of the Bank Account application" class="align-center" src="../../_images/drafter_preview.png" style="width: 700px;" />
</a>
<p><strong>Step 1: Download</strong> <a class="reference download internal" download="" href="../../_downloads/97f4a836334a303bd7ca08d329d9fe3f/bank.py"><code class="xref download docutils literal notranslate"><span class="pre">bank.py</span></code></a> and put it into the same directory as the cookie clicker game.</p>
<p>The file contains the incomplete <code class="docutils literal notranslate"><span class="pre">State</span></code>, five incomplete routes, six correct unit tests, and a call to <code class="docutils literal notranslate"><span class="pre">start_server</span></code>.
You might be wondering why there are five routes when the image above only shows three pages.
The reason is because two of the routes (<code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code>) are routes that modify
the state and then return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.
The diagram below visualizes the relationships between the routes.</p>
<pre  class="mermaid">
        flowchart
    start((&quot;Start&quot;))
    index[&quot;index&quot;]
    start_withdraw[&quot;start_withdraw&quot;]
    finish_withdraw[/&quot;finish_withdraw&quot;/]
    start_deposit[&quot;start_deposit&quot;]
    finish_deposit[/&quot;finish_deposit&quot;/]
    start --&gt; index
    index -- Withdraw --&gt; start_withdraw
    start_withdraw -- &quot;Withdraw(amount)&quot; --&gt; finish_withdraw
    start_withdraw -- Cancel --&gt; index
    finish_withdraw -.-&gt; index
    index -- Deposit --&gt; start_deposit
    start_deposit -- &quot;Deposit(amount)&quot; --&gt; finish_deposit
    start_deposit -- Cancel --&gt; index
    finish_deposit -.-&gt; index
    </pre><p>To explain a little further:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route has buttons to go to the <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> routes.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> have buttons to go to the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> routes, respectively,
and also have a button to go back to the <code class="docutils literal notranslate"><span class="pre">index</span></code> route (“Cancel”).
The <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> routes also have a <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> to input the amount to withdraw or deposit,
which is passed as a parameter to the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> routes.</p></li>
<li><p>When the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> routes are called, they modify the state and
then return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.</p></li>
</ul>
<p><strong>Step 2:</strong> Inside the <code class="docutils literal notranslate"><span class="pre">State</span></code> class, add a <code class="docutils literal notranslate"><span class="pre">balance</span></code> field (an integer).</p>
<p><strong>Step 3:</strong> You will need to create five routes:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code> (like most routes). The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;Your</span> <span class="pre">current</span> <span class="pre">balance</span> <span class="pre">is::</span> <span class="pre">X&quot;</span></code> except instead of <code class="docutils literal notranslate"><span class="pre">X</span></code> it will be the <code class="docutils literal notranslate"><span class="pre">balance</span></code> of the <code class="docutils literal notranslate"><span class="pre">State</span></code>
object.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Withdraw&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Deposit&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned
<code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;How</span> <span class="pre">much</span> <span class="pre">would</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">to</span> <span class="pre">withdraw?&quot;</span></code>.</p></li>
<li><p>A <a class="reference internal" href="../../students/docs.html#TextBox" title="TextBox"><code class="xref py py-func docutils literal notranslate"><span class="pre">TextBox()</span></code></a> that will be used to input the <code class="docutils literal notranslate"><span class="pre">amount</span></code> to withdraw, initially <code class="docutils literal notranslate"><span class="pre">10</span></code>.
Make sure you match the name for the <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> to the name of the parameter in the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Withdraw&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Cancel&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and an <code class="docutils literal notranslate"><span class="pre">amount</span></code> (an <code class="docutils literal notranslate"><span class="pre">int</span></code>).
The <code class="docutils literal notranslate"><span class="pre">balance</span></code> of the <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be changed to reflect the withdrawal.
The function should return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> function with the modified <code class="docutils literal notranslate"><span class="pre">state</span></code>.
<strong>Note</strong>: Use the <code class="docutils literal notranslate"><span class="pre">index</span></code> function inside of this function to avoid code duplication.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned
<code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;How</span> <span class="pre">much</span> <span class="pre">would</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">to</span> <span class="pre">deposit?&quot;</span></code>.</p></li>
<li><p>A <a class="reference internal" href="../../students/docs.html#TextBox" title="TextBox"><code class="xref py py-func docutils literal notranslate"><span class="pre">TextBox()</span></code></a> that will be used to input the <code class="docutils literal notranslate"><span class="pre">amount</span></code> to deposit, initially <code class="docutils literal notranslate"><span class="pre">10</span></code>.
Make sure you match the name for the <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> to the name of the parameter in the <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Deposit&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Cancel&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and an <code class="docutils literal notranslate"><span class="pre">amount</span></code> (an <code class="docutils literal notranslate"><span class="pre">int</span></code>).
The <code class="docutils literal notranslate"><span class="pre">balance</span></code> of the <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be changed to reflect the deposit.
The function should return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> function with the modified <code class="docutils literal notranslate"><span class="pre">state</span></code>.</p></li>
</ol>
<p><strong>Step 4:</strong> Run the application and check the tests to see if you have implemented the routes correctly.</p>
<p>This example has shown you how to have multiple pages that link together, with some routes that do not
modify the state and some routes that do modify the state.
You also have now seen a textbox, which is a way to get input from the user, and how that input can be passed
to another route as a parameter in order to update the state.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="../../contents.html">Page contents</a></h3>
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../../students/installation.html">How to Install Drafter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/quickstart.html">Drafter Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Workbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">Longer Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/docs.html">Drafter Documentation for Students</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/styling.html">Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/testing.html">Testing Drafter Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/reference.html">Reference Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/help.html">More Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">Full API Documentation</a></li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/workbook/part2/bank.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../contents.html">Drafter 1.8.3 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Bank Account</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, acbart &amp; nazim.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>