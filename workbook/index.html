

<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Workbook &#8212; Drafter 1.8.9 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/cloud.css?v=f9ae72be" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=090ae2a6" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../_static/documentation_options.js?v=32f5de64"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";

const defaultStyle = document.createElement('style');
defaultStyle.textContent = `pre.mermaid {
    /* Same as .mermaid-container > pre */
    display: block;
    width: 100%;
}

pre.mermaid > svg {
    /* Same as .mermaid-container > pre > svg */
    height: 500px;
    width: 100%;
    max-width: 100% !important;
}
`;
document.head.appendChild(defaultStyle);

const fullscreenStyle = document.createElement('style');
fullscreenStyle.textContent = `.mermaid-container {
    display: flex;
    flex-direction: row;
    width: 100%;
}

.mermaid-container > pre {
    display: block;
    width: 100%;
}

.mermaid-container > pre > svg {
    height: 500px;
    width: 100%;
    max-width: 100% !important;
}

.mermaid-fullscreen-btn {
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1;
    padding: 0;
    color: #333;
}

.mermaid-fullscreen-btn:hover {
    opacity: 100% !important;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.mermaid-fullscreen-btn.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #e0e0e0;
}

.mermaid-fullscreen-btn.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 3px 10px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal {
    display: none;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 95vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    z-index: 9999;
    padding: 20px;
    overflow: auto;
}

.mermaid-fullscreen-modal.dark-theme {
    background: rgba(0, 0, 0, 0.98);
}

.mermaid-fullscreen-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen {
    position: relative;
    width: 95vw;
    height: 90vh;
    max-width: 95vw;
    max-height: 90vh;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen.dark-theme {
    background: #1a1a1a;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.mermaid-container-fullscreen pre.mermaid {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen .mermaid svg {
    height: 100% !important;
    width: 100% !important;
    cursor: grab;
}

.mermaid-fullscreen-close {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    font-size: 24px;
    line-height: 1;
    color: #333;
}

.mermaid-fullscreen-close:hover {
    background: white;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    transform: scale(1.1);
}

.mermaid-fullscreen-close.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e0e0e0;
}

.mermaid-fullscreen-close.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal .mermaid-fullscreen-btn {
    display: none !important;
}`;
document.head.appendChild(fullscreenStyle);

// Detect if page has dark background
const isDarkTheme = () => {
    const bgColor = window.getComputedStyle(document.body).backgroundColor;
    const match = bgColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]);
        const g = parseInt(match[2]);
        const b = parseInt(match[3]);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        return brightness < 128;
    }
    return false;
};

const load = async () => {
    await mermaid.run();

    const all_mermaids = document.querySelectorAll(".mermaid");
    const mermaids_processed = document.querySelectorAll(".mermaid[data-processed='true']");

    if ("False" === "True") {
        const mermaids_to_add_zoom = -1 === -1 ? all_mermaids.length : -1;
        if(mermaids_to_add_zoom > 0) {
            var svgs = d3.selectAll("");
            if(all_mermaids.length !== mermaids_processed.length) {
                setTimeout(load, 200);
                return;
            } else if(svgs.size() !== mermaids_to_add_zoom) {
                setTimeout(load, 200);
                return;
            } else {
                svgs.each(function() {
                    var svg = d3.select(this);
                    svg.html("<g class='wrapper'>" + svg.html() + "</g>");
                    var inner = svg.select("g");
                    var zoom = d3.zoom().on("zoom", function(event) {
                        inner.attr("transform", event.transform);
                    });
                    svg.call(zoom);
                });
            }
        }
    } else if(all_mermaids.length !== mermaids_processed.length) {
        // Wait for mermaid to process all diagrams
        setTimeout(load, 200);
        return;
    }

    const darkTheme = isDarkTheme();

    // Stop here if not adding fullscreen capability
    if ("True" !== "True") return;

    const modal = document.createElement('div');
    modal.className = 'mermaid-fullscreen-modal' + (darkTheme ? ' dark-theme' : '');
    modal.setAttribute('role', 'dialog');
    modal.setAttribute('aria-modal', 'true');
    modal.setAttribute('aria-label', 'Fullscreen diagram viewer');
    modal.innerHTML = `
        <button class="mermaid-fullscreen-close${darkTheme ? ' dark-theme' : ''}" aria-label="Close fullscreen">‚úï</button>
        <div class="mermaid-container-fullscreen${darkTheme ? ' dark-theme' : ''}"></div>
    `;
    document.body.appendChild(modal);

    const modalContent = modal.querySelector('.mermaid-container-fullscreen');
    const closeBtn = modal.querySelector('.mermaid-fullscreen-close');

    let previousScrollOffset = [window.scrollX, window.scrollY];

    const closeModal = () => {
        modal.classList.remove('active');
        modalContent.innerHTML = '';
        document.body.style.overflow = ''
        window.scrollTo({left: previousScrollOffset[0], top: previousScrollOffset[1], behavior: 'instant'});
    };

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    const allButtons = [];

    document.querySelectorAll('.mermaid').forEach((mermaidDiv) => {
        if (mermaidDiv.parentNode.classList.contains('mermaid-container') ||
            mermaidDiv.closest('.mermaid-fullscreen-modal')) {
            return;
        }

        const container = document.createElement('div');
        container.className = 'mermaid-container';
        mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
        container.appendChild(mermaidDiv);

        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
        fullscreenBtn.setAttribute('aria-label', 'View diagram in fullscreen');
        fullscreenBtn.textContent = '‚õ∂';
        fullscreenBtn.style.opacity = '50%';

        // Calculate dynamic position based on diagram's margin and padding
        const diagramStyle = window.getComputedStyle(mermaidDiv);
        const marginTop = parseFloat(diagramStyle.marginTop) || 0;
        const marginRight = parseFloat(diagramStyle.marginRight) || 0;
        const paddingTop = parseFloat(diagramStyle.paddingTop) || 0;
        const paddingRight = parseFloat(diagramStyle.paddingRight) || 0;
        fullscreenBtn.style.top = `${marginTop + paddingTop + 4}px`;
        fullscreenBtn.style.right = `${marginRight + paddingRight + 4}px`;

        fullscreenBtn.addEventListener('click', () => {
            previousScrollOffset = [window.scroll, window.scrollY];
            const clone = mermaidDiv.cloneNode(true);
            modalContent.innerHTML = '';
            modalContent.appendChild(clone);

            const svg = clone.querySelector('svg');
            if (svg) {
                svg.removeAttribute('width');
                svg.removeAttribute('height');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '100%';
                svg.style.sdisplay = 'block';

                if ("False" === "True") {
                    setTimeout(() => {
                        const g = svg.querySelector('g');
                        if (g) {
                            var svgD3 = d3.select(svg);
                            svgD3.html("<g class='wrapper'>" + svgD3.html() + "</g>");
                            var inner = svgD3.select("g");
                            var zoom = d3.zoom().on("zoom", function(event) {
                                inner.attr("transform", event.transform);
                            });
                            svgD3.call(zoom);
                        }
                    }, 100);
                }
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        container.appendChild(fullscreenBtn);
        allButtons.push(fullscreenBtn);
    });

    // Update theme classes when theme changes
    const updateTheme = () => {
        const dark = isDarkTheme();
        allButtons.forEach(btn => {
            if (dark) {
                btn.classList.add('dark-theme');
            } else {
                btn.classList.remove('dark-theme');
            }
        });
        if (dark) {
            modal.classList.add('dark-theme');
            modalContent.classList.add('dark-theme');
            closeBtn.classList.add('dark-theme');
        } else {
            modal.classList.remove('dark-theme');
            modalContent.classList.remove('dark-theme');
            closeBtn.classList.remove('dark-theme');
        }
    };

    // Watch for theme changes
    const observer = new MutationObserver(updateTheme);
    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
    observer.observe(document.body, {
        attributes: true,
        attributeFilter: ['class', 'style']
    });
};

window.addEventListener("load", load);
</script>

    
    
     
        <script src="../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../_static/cloud.base.js"></script>
    

    
     
        <script src="../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Longer Examples" href="../examples/examples.html" />
    <link rel="prev" title="Drafter Quick Start Guide" href="../quickstart/quickstart.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../examples/examples.html" title="Longer Examples"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../quickstart/quickstart.html" title="Drafter Quick Start Guide"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../contents.html">Drafter 1.8.9 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Workbook</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="workbook">
<span id="id1"></span><h1>Workbook<a class="headerlink" href="#workbook" title="Link to this heading">¬∂</a></h1>
<p>Modern application development is usually done through web development.
We can use Drafter to make web applications that are easy to write and test.
This workbook takes you through developing a few different web applications, piece-by-piece.
We provide unit tests that you can use to check that you are building the software correctly.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Read over all the instructions and text as you go. Many of your questions will be answered directly in the instructions! If you just copy/paste code, you will not learn much from this activity.</p>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="#cookie-clicker"><span class="std std-ref">Cookie Clicker</span></a></p></li>
<li><p><a class="reference internal" href="#bank-account"><span class="std std-ref">Bank Account</span></a></p></li>
<li><p><a class="reference internal" href="#simple-adventure-game"><span class="std std-ref">Simple Adventure Game</span></a></p></li>
<li><p><a class="reference internal" href="#store"><span class="std std-ref">Store</span></a></p></li>
</ul>
<section id="cookie-clicker">
<span id="id2"></span><h2>Cookie Clicker<a class="headerlink" href="#cookie-clicker" title="Link to this heading">¬∂</a></h2>
<p>Cookie Clicker is a simple game where you click a cookie to get more cookies.
Preview the activity at <a href="https://drafter-edu.github.io/examples/cookie/" target="_blank">
    https://drafter-edu.github.io/examples/cookie/</a>.</p>
<a class="reference internal image-reference" href="../_images/cookie.png"><img alt="Screenshot of the Cookie Clicker game" class="align-center" src="../_images/cookie.png" style="width: 427px;" />
</a>
<p><strong>Step 1: Download</strong> <a class="reference download internal" download="" href="../_downloads/a24d1c695f83f8bd6ed9b2e79b5688fc/cookie.py"><code class="xref download docutils literal notranslate"><span class="pre">cookie.py</span></code></a> and put it into an appropriate directory, where you will place all the other files
for this workbook.</p>
<p>The file contains a <code class="docutils literal notranslate"><span class="pre">State</span></code> class and two route functions: <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">cookie</span></code>.
The file also contains three unit tests that you will need to pass; you cannot make alterations
to the unit tests, since they match the instructor tests we are using to grade you.
At the bottom, there is a call to <code class="docutils literal notranslate"><span class="pre">start_server</span></code>, passing in a <code class="docutils literal notranslate"><span class="pre">State</span></code> object with <code class="docutils literal notranslate"><span class="pre">cookies</span></code> set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
You won‚Äôt be able to run this file until you have finished implementing <code class="docutils literal notranslate"><span class="pre">State</span></code> and the functions.</p>
<p><strong>Step 2:</strong> Inside the <code class="docutils literal notranslate"><span class="pre">State</span></code> field, you will need to create a <code class="docutils literal notranslate"><span class="pre">cookies</span></code> field (an integer).
You can remove the ‚ÄúTODO‚Äù part of the docstring.</p>
<p><strong>Step 3:</strong> You will need to define the body of the two routes:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">have</span> <span class="pre">X</span> <span class="pre">cookies&quot;</span></code> except instead of <code class="docutils literal notranslate"><span class="pre">X</span></code> it will be the <code class="docutils literal notranslate"><span class="pre">cookies</span></code> of the <code class="docutils literal notranslate"><span class="pre">State</span></code>
object.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;üç™&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>.
The <code class="docutils literal notranslate"><span class="pre">cookies</span></code> of the <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be increased by 1.
The function should return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> function with the modified <code class="docutils literal notranslate"><span class="pre">state</span></code>.</p></li>
</ol>
<p><strong>Step 4:</strong> Run the file. You should see a message like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TEST</span> <span class="n">PASSED</span> <span class="o">-</span> <span class="p">[</span><span class="n">line</span> <span class="mi">23</span><span class="p">]</span> <span class="n">assert_equal</span><span class="p">(</span>
<span class="n">TEST</span> <span class="n">PASSED</span> <span class="o">-</span> <span class="p">[</span><span class="n">line</span> <span class="mi">31</span><span class="p">]</span> <span class="n">assert_equal</span><span class="p">(</span>
<span class="n">TEST</span> <span class="n">PASSED</span> <span class="o">-</span> <span class="p">[</span><span class="n">line</span> <span class="mi">39</span><span class="p">]</span> <span class="n">assert_equal</span><span class="p">(</span>
<span class="n">Drafter</span> <span class="n">server</span> <span class="n">starting</span> <span class="n">up</span> <span class="p">(</span><span class="n">using</span> <span class="n">Bottle</span> <span class="n">backend</span><span class="p">)</span><span class="o">.</span>
<span class="n">Listening</span> <span class="n">on</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span>

<span class="n">Hit</span> <span class="n">Ctrl</span><span class="o">-</span><span class="n">C</span> <span class="n">to</span> <span class="n">quit</span><span class="o">.</span>
</pre></div>
</div>
<p>It is possible that you will see an error instead. If you do, read the error message carefully and try to fix the problem.
The application will not start if there are syntax or runtime errors in your code.
However, if you see the message above, you can open a web browser and go to <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/</span></code> to see your application.
This will work even if you have not passed the tests yet.</p>
<p>If you see failing tests, then it will be very important to go look at the failing tests and see what they
are expecting. The debug information shown in the browser can actually help you understand what is going wrong.
Scroll down to the bottom of the live webpage.</p>
<a class="reference internal image-reference" href="../_images/cookie_test.png"><img alt="Screenshot of failing test for the Cookie Clicker game" class="align-center" src="../_images/cookie_test.png" style="width: 700px;" />
</a>
<p>The <strong>Test Status</strong> section will show a visual representation of the tests that are failing,
with the exact differences highlighted. In the example above, the third test is failing because
the when we called <code class="docutils literal notranslate"><span class="pre">cookie(State(cookies=100))</span></code> we expected the result to have <code class="docutils literal notranslate"><span class="pre">cookies</span></code> set to <code class="docutils literal notranslate"><span class="pre">101</span></code>,
but instead the result had <code class="docutils literal notranslate"><span class="pre">cookies</span></code> set to <code class="docutils literal notranslate"><span class="pre">1</span></code>. This was a mistake in the implementation of the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> function,
since the function should be increasing the number of cookies by 1 instead of just assigning the value 1.
The correct version of <code class="docutils literal notranslate"><span class="pre">cookie</span></code> should look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@route</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cookie</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
    <span class="n">state</span><span class="o">.</span><span class="n">cookies</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">index</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
<p>This example highlights the two major kinds of routes that you will see:</p>
<ul class="simple">
<li><p>routes that <strong>modify</strong> (mutate) the state (like <code class="docutils literal notranslate"><span class="pre">cookie</span></code>), and</p></li>
<li><p>routes that <strong>do not modify</strong> the state (like <code class="docutils literal notranslate"><span class="pre">index</span></code>).</p></li>
</ul>
<p>Usually, the routes that modify the state will return a new page that is generated by calling another route.
This avoids code duplication and makes it easier to test the routes, since we are reusing the rendering logic of the other routes.
The routes that do not modify the state will usually just return a page with the state as is.</p>
<pre  class="mermaid">
        flowchart LR
    start((&quot;Start&quot;))
    index[&quot;index&quot;]
    cookie[/&quot;cookie&quot;/]
    start --&gt; index
    index -- &quot;üç™&quot; --&gt; cookie
    cookie -.-&gt; index
    </pre><p>The diagram above helps visualize the flow of the application.
When the application starts, the <code class="docutils literal notranslate"><span class="pre">index</span></code> route is called.
When the üç™ button is clicked, the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route is called, which increments the number of cookies and then returns
the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.
We use a dashed arrow to indicate that the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route does not directly return the <code class="docutils literal notranslate"><span class="pre">Page</span></code> object, but instead
calls the <code class="docutils literal notranslate"><span class="pre">index</span></code> route to get the <code class="docutils literal notranslate"><span class="pre">Page</span></code> object.
We use a parallelogram to indicate that the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route modifies the state.</p>
</section>
<section id="bank-account">
<span id="id3"></span><h2>Bank Account<a class="headerlink" href="#bank-account" title="Link to this heading">¬∂</a></h2>
<p>A bank account let‚Äôs you withdraw and deposit money.
We‚Äôll make a simple bank account application to support this.
Preview this website at <a href="https://drafter-edu.github.io/examples/bank/" target="_blank">
    https://drafter-edu.github.io/examples/bank/</a>.</p>
<a class="reference internal image-reference" href="../_images/drafter_preview.png"><img alt="Screenshot of the Bank Account application" class="align-center" src="../_images/drafter_preview.png" style="width: 700px;" />
</a>
<p><strong>Step 1: Download</strong> <a class="reference download internal" download="" href="../_downloads/97f4a836334a303bd7ca08d329d9fe3f/bank.py"><code class="xref download docutils literal notranslate"><span class="pre">bank.py</span></code></a> and put it into the same directory as the cookie clicker game.</p>
<p>The file contains the incomplete <code class="docutils literal notranslate"><span class="pre">State</span></code>, five incomplete routes, six correct unit tests, and a call to <code class="docutils literal notranslate"><span class="pre">start_server</span></code>.
You might be wondering why there are five routes when the image above only shows three pages.
The reason is because two of the routes (<code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code>) are routes that modify
the state and then return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.
The diagram below visualizes the relationships between the routes.</p>
<pre  class="mermaid">
        flowchart
    start((&quot;Start&quot;))
    index[&quot;index&quot;]
    start_withdraw[&quot;start_withdraw&quot;]
    finish_withdraw[/&quot;finish_withdraw&quot;/]
    start_deposit[&quot;start_deposit&quot;]
    finish_deposit[/&quot;finish_deposit&quot;/]
    start --&gt; index
    index -- Withdraw --&gt; start_withdraw
    start_withdraw -- &quot;Withdraw(amount)&quot; --&gt; finish_withdraw
    start_withdraw -- Cancel --&gt; index
    finish_withdraw -.-&gt; index
    index -- Deposit --&gt; start_deposit
    start_deposit -- &quot;Deposit(amount)&quot; --&gt; finish_deposit
    start_deposit -- Cancel --&gt; index
    finish_deposit -.-&gt; index
    </pre><p>To explain a little further:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route has buttons to go to the <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> routes.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> have buttons to go to the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> routes, respectively,
and also have a button to go back to the <code class="docutils literal notranslate"><span class="pre">index</span></code> route (‚ÄúCancel‚Äù).
The <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> routes also have a <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> to input the amount to withdraw or deposit,
which is passed as a parameter to the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> routes.</p></li>
<li><p>When the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> and <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> routes are called, they modify the state and
then return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.</p></li>
</ul>
<p><strong>Step 2:</strong> Inside the <code class="docutils literal notranslate"><span class="pre">State</span></code> class, add a <code class="docutils literal notranslate"><span class="pre">balance</span></code> field (an integer).</p>
<p><strong>Step 3:</strong> You will need to create five routes:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code> (like most routes). The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;Your</span> <span class="pre">current</span> <span class="pre">balance</span> <span class="pre">is:&quot;</span></code>,</p></li>
<li><p>The current <code class="docutils literal notranslate"><span class="pre">balance</span></code> of the <code class="docutils literal notranslate"><span class="pre">State</span></code> object, as a string on its own line.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Withdraw&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Deposit&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">start_withdraw</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned
<code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;How</span> <span class="pre">much</span> <span class="pre">would</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">to</span> <span class="pre">withdraw?&quot;</span></code>.</p></li>
<li><p>A <a class="reference internal" href="../students/docs.html#TextBox" title="TextBox"><code class="xref py py-func docutils literal notranslate"><span class="pre">TextBox()</span></code></a> that will be used to input the <code class="docutils literal notranslate"><span class="pre">amount</span></code> to withdraw, initially <code class="docutils literal notranslate"><span class="pre">10</span></code>.
Make sure you match the name for the <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> to the name of the parameter in the <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Withdraw&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Cancel&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">finish_withdraw</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and an <code class="docutils literal notranslate"><span class="pre">amount</span></code> (an <code class="docutils literal notranslate"><span class="pre">int</span></code>).
The <code class="docutils literal notranslate"><span class="pre">balance</span></code> of the <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be changed to reflect the withdrawal.
The function should return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> function with the modified <code class="docutils literal notranslate"><span class="pre">state</span></code>.
<strong>Note</strong>: Use the <code class="docutils literal notranslate"><span class="pre">index</span></code> function inside of this function to avoid code duplication.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">start_deposit</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned
<code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;How</span> <span class="pre">much</span> <span class="pre">would</span> <span class="pre">you</span> <span class="pre">like</span> <span class="pre">to</span> <span class="pre">deposit?&quot;</span></code>.</p></li>
<li><p>A <a class="reference internal" href="../students/docs.html#TextBox" title="TextBox"><code class="xref py py-func docutils literal notranslate"><span class="pre">TextBox()</span></code></a> that will be used to input the <code class="docutils literal notranslate"><span class="pre">amount</span></code> to deposit, initially <code class="docutils literal notranslate"><span class="pre">10</span></code>.
Make sure you match the name for the <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> to the name of the parameter in the <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Deposit&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Cancel&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">finish_deposit</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and an <code class="docutils literal notranslate"><span class="pre">amount</span></code> (an <code class="docutils literal notranslate"><span class="pre">int</span></code>).
The <code class="docutils literal notranslate"><span class="pre">balance</span></code> of the <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be changed to reflect the deposit.
The function should return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> function with the modified <code class="docutils literal notranslate"><span class="pre">state</span></code>.</p></li>
</ol>
<p><strong>Step 4:</strong> Run the application and check the tests to see if you have implemented the routes correctly.</p>
<p>This example has shown you how to have multiple pages that link together, with some routes that do not
modify the state and some routes that do modify the state.
You also have now seen a textbox, which is a way to get input from the user, and how that input can be passed
to another route as a parameter in order to update the state.</p>
</section>
<section id="simple-adventure-game">
<span id="id4"></span><h2>Simple Adventure Game<a class="headerlink" href="#simple-adventure-game" title="Link to this heading">¬∂</a></h2>
<p>Now we‚Äôll make a little adventure game with multiple pages that link to each other in a more complicated
way, and also an item that you can pick up and use in of the rooms. To make things more exciting, we‚Äôll
have images of the screens in the game (generated using ChatGPT).
Preview this website at <a href="https://drafter-edu.github.io/examples/adventure/" target="_blank">
    https://drafter-edu.github.io/examples/adventure/</a>.</p>
<a class="reference internal image-reference" href="../_images/screen_shots.png"><img alt="Screenshot of the Simple Adventure Game" class="align-center" src="../_images/screen_shots.png" style="width: 700px;" />
</a>
<p><strong>Step 1: Download</strong> the images and the starting file for the game from the following links:</p>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../_downloads/6841b758afb0fb555eb818f9b20b5a99/adventure.py"><code class="xref download docutils literal notranslate"><span class="pre">adventure.py</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/74ffc99828e0fdff7edf4672e4966a29/field.png"><code class="xref download docutils literal notranslate"><span class="pre">field.png</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/f94f03624b618690bdc40b01c0946231/woods.png"><code class="xref download docutils literal notranslate"><span class="pre">woods.png</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/dc183c983acfcc52bfed7efbcc3d9303/cave.png"><code class="xref download docutils literal notranslate"><span class="pre">cave.png</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/5b02168df9b7f2f5f111519a19a88979/victory.png"><code class="xref download docutils literal notranslate"><span class="pre">victory.png</span></code></a></p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure the files are in the same folder as the python file. You can change the images
but make sure they have the same filenames, or the tests won‚Äôt run!</p>
</div>
<p>Once again, the number of routes and the number of pages do not match.
The diagram below shows the flow of the game. The game starts with the <code class="docutils literal notranslate"><span class="pre">index</span></code> route, where the player
enters their name. The player then moves to the <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route, where they can choose to go to the
<code class="docutils literal notranslate"><span class="pre">woods</span></code> or the <code class="docutils literal notranslate"><span class="pre">cave</span></code>. In the <code class="docutils literal notranslate"><span class="pre">woods</span></code> route, the player can pick up a key, which will allow them to
unlock the door in the <code class="docutils literal notranslate"><span class="pre">cave</span></code> route. If the player does not have the key, they will be unable to unlock
the door and will have to leave the cave. The game ends in the <code class="docutils literal notranslate"><span class="pre">ending</span></code> route, where the player finds a
treasure chest and wins the game.</p>
<pre  class="mermaid">
        flowchart
    start((&quot;Start&quot;))
    index[&quot;index&quot;]
    begin[/&quot;begin&quot;/]
    small_field[&quot;small_field&quot;]
    woods[&quot;woods&quot;]
    check_has_key{has_key}
    check_missing_key{not has_key}
    cave[&quot;cave&quot;]
    take_key[/&quot;take_key&quot;/]
    ending[&quot;ending&quot;]

    start --&gt; index
    index -- &quot;Begin(name)&quot; --&gt; begin
    begin -.-&gt; small_field
    small_field -- &quot;Woods&quot; --&gt; woods
    small_field -- &quot;Cave&quot; --&gt; cave
    woods --- check_missing_key
    check_missing_key -- &quot;Take key&quot; --&gt; take_key
    take_key -.-&gt; woods
    woods -- &quot;Leave&quot; --&gt; small_field
    check_has_key -- &quot;Unlock door&quot; --&gt; ending
    cave -.- check_has_key
    cave -- &quot;Leave&quot; --&gt; small_field
    </pre><p>Notice the diamond shaped nodes in the diagram. These are decision nodes. The game will have two different
paths depending on whether the player has the key or not. The Cave only shows the ‚ÄúUnlock door‚Äù button if
the player has the key. The Woods only shows the ‚ÄúTake key‚Äù button if the player does not have the key.
This means that you will need an <code class="docutils literal notranslate"><span class="pre">if</span></code> statement in your route to decide which content to show.</p>
<p><strong>Step 2:</strong> Add two fields to the <code class="docutils literal notranslate"><span class="pre">State</span></code> class.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">has_key</span></code> field is a boolean</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> field is a string</p></li>
</ul>
<p><strong>Step 3:</strong> Finish implementing the following routes:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;Welcome</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">adventure!</span> <span class="pre">What</span> <span class="pre">is</span> <span class="pre">your</span> <span class="pre">name?&quot;</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> that will take the user‚Äôs <code class="docutils literal notranslate"><span class="pre">name</span></code> (the default value is <code class="docutils literal notranslate"><span class="pre">&quot;Adventurer&quot;</span></code>).</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Begin&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">begin</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">begin</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will have the <code class="docutils literal notranslate"><span class="pre">name</span></code> field set to the value of the <code class="docutils literal notranslate"><span class="pre">TextBox</span></code> in the previous
page. Use the <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route to return the next page, rather than defining a new <code class="docutils literal notranslate"><span class="pre">Page</span></code> object.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">are</span> <span class="pre">NAME.&quot;</span></code> except replacing <code class="docutils literal notranslate"><span class="pre">NAME</span></code> with the value of the <code class="docutils literal notranslate"><span class="pre">name</span></code> field in the
<code class="docutils literal notranslate"><span class="pre">State</span></code> object.</p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">are</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">small</span> <span class="pre">field.&quot;</span></code></p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">see</span> <span class="pre">paths</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">woods</span> <span class="pre">and</span> <span class="pre">a</span> <span class="pre">cave.</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">Cave</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">cave</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">Woods</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">woods</span></code> route.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> with the filename <code class="docutils literal notranslate"><span class="pre">&quot;field.png&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cave</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will depend on whether or not
the <code class="docutils literal notranslate"><span class="pre">state</span></code> has the <code class="docutils literal notranslate"><span class="pre">has_key</span></code> field set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. If it is is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the content
of the page should be:</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">enter</span> <span class="pre">the</span> <span class="pre">cave.&quot;</span></code></p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">see</span> <span class="pre">a</span> <span class="pre">locked</span> <span class="pre">door.&quot;</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Unlock</span> <span class="pre">door&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">ending</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Leave&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> with the filename <code class="docutils literal notranslate"><span class="pre">&quot;cave.png&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Otherwise, if the <code class="docutils literal notranslate"><span class="pre">has_key</span></code> field is <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the content of the page should be:</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">enter</span> <span class="pre">the</span> <span class="pre">cave.&quot;</span></code></p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">see</span> <span class="pre">a</span> <span class="pre">locked</span> <span class="pre">door.&quot;</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Leave&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> with the filename <code class="docutils literal notranslate"><span class="pre">&quot;cave.png&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">woods</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will depend on whether or not
the <code class="docutils literal notranslate"><span class="pre">state</span></code> has the <code class="docutils literal notranslate"><span class="pre">has_key</span></code> field set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. If it is is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then the content
of the page should be:</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">are</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">woods.&quot;</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Leave&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> with the filename <code class="docutils literal notranslate"><span class="pre">&quot;woods.png&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
<p>Otherwise, if the <code class="docutils literal notranslate"><span class="pre">has_key</span></code> field is <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the content of the page should be:</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">are</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">woods.&quot;</span></code></p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">see</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">on</span> <span class="pre">the</span> <span class="pre">ground.&quot;</span></code></p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Take</span> <span class="pre">key&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">take_key</span></code> route.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;Leave&quot;</span></code> that links to the <code class="docutils literal notranslate"><span class="pre">small_field</span></code> route.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> with the filename <code class="docutils literal notranslate"><span class="pre">&quot;woods.png&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">take_key</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will have the <code class="docutils literal notranslate"><span class="pre">has_key</span></code> field set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Use the <code class="docutils literal notranslate"><span class="pre">woods</span></code> route to return
the next page, rather than defining a new <code class="docutils literal notranslate"><span class="pre">Page</span></code> object.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ending</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be:</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">unlock</span> <span class="pre">the</span> <span class="pre">door.&quot;,</span></code></p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">find</span> <span class="pre">a</span> <span class="pre">treasure</span> <span class="pre">chest.&quot;</span></code></p></li>
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">win!&quot;</span></code></p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Image</span></code> with the filename <code class="docutils literal notranslate"><span class="pre">&quot;victory.png&quot;</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<p><strong>Step 4:</strong> Run the application and check the tests to see if you have implemented the routes correctly.</p>
<p>This application showed you how to make multiple pages that link in more complicated ways, including
some pages that had different content depending on the state of the <code class="docutils literal notranslate"><span class="pre">State</span></code> object. You also learned
how to use images in your application.</p>
</section>
<section id="store">
<span id="id5"></span><h2>Store<a class="headerlink" href="#store" title="Link to this heading">¬∂</a></h2>
<p>This activity is a little store where you can purchase items for a game.
Preview the activity at <a href="https://drafter-edu.github.io/examples/store/" target="_blank">
    https://drafter-edu.github.io/examples/store/</a>.</p>
<p>In this example, we‚Äôve already written the state and all the routes.
You just need to make all the tests for us!</p>
<p>This is most easily done by just running the site, and then interacting
with the shop. As you explore unique pages, tests will be generated
at the bottom in the ‚ÄúCombined Page History‚Äù section at the bottom of the
page. This will only retain unique visits, so you can‚Äôt just spam the
same page over and over again.</p>
<p>You can also manually create tests by writing them yourself.
Ultimately, though, you need to make at least 10 unique tests!</p>
<p><strong>Step 1: Download</strong> <a class="reference download internal" download="" href="../_downloads/b810a7b8039f6ee3810e2d12adff25aa/store.py"><code class="xref download docutils literal notranslate"><span class="pre">store.py</span></code></a> and put it into an appropriate directory,
where you placed everything else.</p>
<p><strong>Step 2:</strong> Run the server, and then try purchasing things.</p>
<p><strong>Step 3:</strong> Write tests for the store. Or rather, just copy the tests that
have been generated for you at the bottom of the page.</p>
<p><strong>Step 4:</strong> Run the tests with <cite>python store.py</cite> and make sure they all pass.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="../contents.html">Page contents</a></h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../students/installation.html">How to Install Drafter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/quickstart.html">Drafter Quick Start Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Workbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cookie-clicker">Cookie Clicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bank-account">Bank Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-adventure-game">Simple Adventure Game</a></li>
<li class="toctree-l2"><a class="reference internal" href="#store">Store</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Longer Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../students/docs.html">Drafter Documentation for Students</a></li>
<li class="toctree-l1"><a class="reference internal" href="../students/html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../students/styling.html">Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../students/testing.html">Testing Drafter Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../students/deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">Reference Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../students/help.html">More Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">Full API Documentation</a></li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="../quickstart/quickstart.html"
                          title="Previous page">&larr; Drafter Quick Start Guide</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="../examples/examples.html"
                          title="Next page">&rarr; Longer Examples</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/workbook/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 ¬´
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 ¬ª
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../examples/examples.html" title="Longer Examples"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../quickstart/quickstart.html" title="Drafter Quick Start Guide"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../contents.html">Drafter 1.8.9 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Workbook</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, acbart &amp; nazim.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>