

<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Cookie Clicker &#8212; Drafter 1.6.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/cloud.css?v=f9ae72be" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=090ae2a6" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../../_static/documentation_options.js?v=452006c5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";import elkLayouts from "https://cdn.jsdelivr.net/npm/@mermaid-js/layout-elk@0.1.4/dist/mermaid-layout-elk.esm.min.mjs";mermaid.registerLayoutLoaders(elkLayouts);mermaid.initialize({startOnLoad:false});</script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">
import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.2.0/dist/mermaid.esm.min.mjs";
window.addEventListener("load", () => mermaid.run());
</script>

    
    
     
        <script src="../../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../../_static/cloud.base.js"></script>
    

    
     
        <script src="../../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../contents.html">Drafter 1.6.3 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Cookie Clicker</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="cookie-clicker">
<h1>Cookie Clicker<a class="headerlink" href="#cookie-clicker" title="Link to this heading">¬∂</a></h1>
<p>Cookie Clicker is a simple game where you click a cookie to get more cookies.
Preview the activity at <a href="https://drafter-edu.github.io/examples/cookie/" target="_blank">
    https://drafter-edu.github.io/examples/cookie/</a>.</p>
<a class="reference internal image-reference" href="../../_images/cookie.png"><img alt="Screenshot of the Cookie Clicker game" class="align-center" src="../../_images/cookie.png" style="width: 427px;" />
</a>
<p><strong>Step 1: Download</strong> <a class="reference download internal" download="" href="../../_downloads/a24d1c695f83f8bd6ed9b2e79b5688fc/cookie.py"><code class="xref download docutils literal notranslate"><span class="pre">cookie.py</span></code></a> and put it into an appropriate directory, where you will place all the other files
for this workbook.</p>
<p>The file contains a <code class="docutils literal notranslate"><span class="pre">State</span></code> class and two route functions: <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">cookie</span></code>.
The file also contains three unit tests that you will need to pass; you cannot make alterations
to the unit tests, since they match the instructor tests we are using to grade you.
At the bottom, there is a call to <code class="docutils literal notranslate"><span class="pre">start_server</span></code>, passing in a <code class="docutils literal notranslate"><span class="pre">State</span></code> object with <code class="docutils literal notranslate"><span class="pre">cookies</span></code> set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.
You won‚Äôt be able to run this file until you have finished implementing <code class="docutils literal notranslate"><span class="pre">State</span></code> and the functions.</p>
<p><strong>Step 2:</strong> Inside the <code class="docutils literal notranslate"><span class="pre">State</span></code> field, you will need to create a <code class="docutils literal notranslate"><span class="pre">cookies</span></code> field (an integer).
You can remove the ‚ÄúTODO‚Äù part of the docstring.</p>
<p><strong>Step 3:</strong> You will need to define the body of the two routes:</p>
<ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">index</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>. The <code class="docutils literal notranslate"><span class="pre">state</span></code> in the
returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be unchanged. The content of the <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be (in order):</p>
<blockquote>
<div><ul class="simple">
<li><p>The text <code class="docutils literal notranslate"><span class="pre">&quot;You</span> <span class="pre">have</span> <span class="pre">X</span> <span class="pre">cookies&quot;</span></code> except instead of <code class="docutils literal notranslate"><span class="pre">X</span></code> it will be the <code class="docutils literal notranslate"><span class="pre">cookies</span></code> of the <code class="docutils literal notranslate"><span class="pre">State</span></code>
object.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Button</span></code> with the text <code class="docutils literal notranslate"><span class="pre">&quot;üç™&quot;</span></code> that links to a <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route will consume a <code class="docutils literal notranslate"><span class="pre">State</span></code> object and return a <code class="docutils literal notranslate"><span class="pre">Page</span></code>.
The <code class="docutils literal notranslate"><span class="pre">cookies</span></code> of the <code class="docutils literal notranslate"><span class="pre">state</span></code> in the returned <code class="docutils literal notranslate"><span class="pre">Page</span></code> will be increased by 1.
The function should return the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> function with the modified <code class="docutils literal notranslate"><span class="pre">state</span></code>.</p></li>
</ol>
<p><strong>Step 4:</strong> Run the file. You should see a message like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TEST</span> <span class="n">PASSED</span> <span class="o">-</span> <span class="p">[</span><span class="n">line</span> <span class="mi">23</span><span class="p">]</span> <span class="n">assert_equal</span><span class="p">(</span>
<span class="n">TEST</span> <span class="n">PASSED</span> <span class="o">-</span> <span class="p">[</span><span class="n">line</span> <span class="mi">31</span><span class="p">]</span> <span class="n">assert_equal</span><span class="p">(</span>
<span class="n">TEST</span> <span class="n">PASSED</span> <span class="o">-</span> <span class="p">[</span><span class="n">line</span> <span class="mi">39</span><span class="p">]</span> <span class="n">assert_equal</span><span class="p">(</span>
<span class="n">Drafter</span> <span class="n">server</span> <span class="n">starting</span> <span class="n">up</span> <span class="p">(</span><span class="n">using</span> <span class="n">Bottle</span> <span class="n">backend</span><span class="p">)</span><span class="o">.</span>
<span class="n">Listening</span> <span class="n">on</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span>

<span class="n">Hit</span> <span class="n">Ctrl</span><span class="o">-</span><span class="n">C</span> <span class="n">to</span> <span class="n">quit</span><span class="o">.</span>
</pre></div>
</div>
<p>It is possible that you will see an error instead. If you do, read the error message carefully and try to fix the problem.
The application will not start if there are syntax or runtime errors in your code.
However, if you see the message above, you can open a web browser and go to <code class="docutils literal notranslate"><span class="pre">http://localhost:8080/</span></code> to see your application.
This will work even if you have not passed the tests yet.</p>
<p>If you see failing tests, then it will be very important to go look at the failing tests and see what they
are expecting. The debug information shown in the browser can actually help you understand what is going wrong.
Scroll down to the bottom of the live webpage.</p>
<a class="reference internal image-reference" href="../../_images/cookie_test.png"><img alt="Screenshot of failing test for the Cookie Clicker game" class="align-center" src="../../_images/cookie_test.png" style="width: 700px;" />
</a>
<p>The <strong>Test Status</strong> section will show a visual representation of the tests that are failing,
with the exact differences highlighted. In the example above, the third test is failing because
the when we called <code class="docutils literal notranslate"><span class="pre">cookie(State(cookies=100))</span></code> we expected the result to have <code class="docutils literal notranslate"><span class="pre">cookies</span></code> set to <code class="docutils literal notranslate"><span class="pre">101</span></code>,
but instead the result had <code class="docutils literal notranslate"><span class="pre">cookies</span></code> set to <code class="docutils literal notranslate"><span class="pre">1</span></code>. This was a mistake in the implementation of the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> function,
since the function should be increasing the number of cookies by 1 instead of just assigning the value 1.
The correct version of <code class="docutils literal notranslate"><span class="pre">cookie</span></code> should look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@route</span>
<span class="k">def</span><span class="w"> </span><span class="nf">cookie</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Page</span><span class="p">:</span>
    <span class="n">state</span><span class="o">.</span><span class="n">cookies</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">index</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>
</div>
<p>This example highlights the two major kinds of routes that you will see:</p>
<ul class="simple">
<li><p>routes that <strong>modify</strong> (mutate) the state (like <code class="docutils literal notranslate"><span class="pre">cookie</span></code>), and</p></li>
<li><p>routes that <strong>do not modify</strong> the state (like <code class="docutils literal notranslate"><span class="pre">index</span></code>).</p></li>
</ul>
<p>Usually, the routes that modify the state will return a new page that is generated by calling another route.
This avoids code duplication and makes it easier to test the routes, since we are reusing the rendering logic of the other routes.
The routes that do not modify the state will usually just return a page with the state as is.</p>
<pre  class="mermaid">
        flowchart LR
    start((&quot;Start&quot;))
    index[&quot;index&quot;]
    cookie[/&quot;cookie&quot;/]
    start --&gt; index
    index -- &quot;üç™&quot; --&gt; cookie
    cookie -.-&gt; index
    </pre><p>The diagram above helps visualize the flow of the application.
When the application starts, the <code class="docutils literal notranslate"><span class="pre">index</span></code> route is called.
When the üç™ button is clicked, the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route is called, which increments the number of cookies and then returns
the result of calling the <code class="docutils literal notranslate"><span class="pre">index</span></code> route.
We use a dashed arrow to indicate that the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route does not directly return the <code class="docutils literal notranslate"><span class="pre">Page</span></code> object, but instead
calls the <code class="docutils literal notranslate"><span class="pre">index</span></code> route to get the <code class="docutils literal notranslate"><span class="pre">Page</span></code> object.
We use a parallelogram to indicate that the <code class="docutils literal notranslate"><span class="pre">cookie</span></code> route modifies the state.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="../../contents.html">Page contents</a></h3>
    <ul>
<li class="toctree-l1"><a class="reference internal" href="../../students/installation.html">How to Install Drafter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/quickstart.html">Drafter Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Workbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/examples.html">Longer Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/docs.html">Drafter Documentation for Students</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/styling.html">Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/testing.html">Testing Drafter Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/reference.html">Reference Lists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../students/help.html">More Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/api.html">Full API Documentation</a></li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/workbook/part1/cookie.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 ¬´
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 ¬ª
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../contents.html">Drafter 1.6.3 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">Cookie Clicker</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, acbart &amp; nazim.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>