{"version":3,"sources":["../src/index.ts","../src/types/skulpt/index.ts","../src/skulpt-tools.ts"],"sourcesContent":["import { getSkulptFile, setupSkulpt, startServer } from \"./skulpt-tools\";\n\nexport interface DrafterInitOptions {\n    code?: string;\n    url?: string;\n}\n\nconst x: pyStr = new Sk.builtin.str(\"hello\");\n\nexport function runStudentCode(options: DrafterInitOptions) {\n    setupSkulpt();\n\n    if (options.code) {\n        return startServer(options.code, \"main\");\n    } else if (options.url) {\n        return fetch(options.url)\n            .then((response) => {\n                if (!response.ok) {\n                    throw new Error(\n                        \"Network response was not ok \" + response.statusText\n                    );\n                }\n                return response.text(); // assuming the server returns text content\n            })\n            .then((contents) => {\n                return startServer(contents, \"main\");\n            });\n    } else {\n        throw new Error(\"Either code or url must be provided\");\n    }\n\n    console.log(\"Drafter setup complete.\");\n}\n","import \"./types\";\n\nexport const {\n    builtin: {\n        bool: { true$: pyTrue, false$: pyFalse },\n        none: { none$: pyNone },\n        NotImplemented: { NotImplemented$: pyNotImplemented },\n\n        bool: pyBool,\n        bytes: pyBytes,\n        dict: pyDict,\n        float_: pyFloat,\n        frozenset: pyFrozenSet,\n        func: pyFunc,\n        int_: pyInt,\n        list: pyList,\n        none: pyNoneType,\n        mappingproxy: pyMappingProxy,\n        module: pyModule,\n        object: pyObject,\n        set: pySet,\n        slice: pySlice,\n        sk_method: pyBuiltinFunctionOrMethod,\n        str: pyStr,\n        tuple: pyTuple,\n        type: pyType,\n\n        classmethod: pyClassMethod,\n        staticmethod: pyStaticMethod,\n        property: pyProperty,\n\n        BaseException: pyBaseException,\n        SystemExit: pySystemExit,\n        KeyboardInterrupt: pyKeyboardInterrupt,\n        GeneratorExit: pyGeneratorExit,\n        Exception: pyException,\n        StopIteration: pyStopIteration,\n        StopAsyncIteration: pyStopAsyncIteration,\n        ArithmeticError: pyArithmeticError,\n        FloatingPointError: pyFloatingPointError,\n        OverflowError: pyOverflowError,\n        ZeroDivisionError: pyZeroDivisionError,\n        AssertionError: pyAssertionError,\n        AttributeError: pyAttributeError,\n        BufferError: pyBufferError,\n        EOFError: pyEOFError,\n        ImportError: pyImportError,\n        ModuleNotFoundError: pyModuleNotFoundError,\n        LookupError: pyLookupError,\n        IndexError: pyIndexError,\n        KeyError: pyKeyError,\n        MemoryError: pyMemoryError,\n        NameError: pyNameError,\n        UnboundLocalError: pyUnboundLocalError,\n        OSError: pyOSError,\n        FileNotFoundError: pyFileNotFoundError,\n        TimeoutError: pyTimeoutError,\n        ReferenceError: pyReferenceError,\n        RuntimeError: pyRuntimeError,\n        NotImplementedError: pyNotImplementedError,\n        RecursionError: pyRecursionError,\n        SyntaxError: pySyntaxError,\n        IndentationError: pyIndentationError,\n        TabError: pyTabError,\n        SystemError: pySystemError,\n        TypeError: pyTypeError,\n        ValueError: pyValueError,\n        UnicodeError: pyUnicodeError,\n        UnicodeDecodeError: pyUnicodeDecodeError,\n        UnicodeEncodeError: pyUnicodeEncodeError,\n        ExternalError: pyExternalError,\n\n        checkString,\n        checkBool,\n        checkInt,\n        checkAnySet,\n        checkBytes,\n        checkCallable,\n        checkIterable,\n        checkNone,\n\n        issubclass: pyIsSubclass,\n        isinstance: pyIsInstance,\n        hasattr: pyHasAttr,\n    },\n    misceval: {\n        isTrue,\n        Suspension,\n        Break,\n        chain: chainOrSuspend,\n        tryCatch: tryCatchOrSuspend,\n        retryOptionalSuspensionOrThrow,\n        objectRepr,\n        buildClass: buildPyClass,\n        iterFor: iterForOrSuspend,\n        iterArray,\n        richCompareBool,\n        callsimArray: pyCall,\n        callsimOrSuspendArray: pyCallOrSuspend,\n        arrayFromIterable,\n        asyncToPromise: suspensionToPromise,\n        promiseToSuspension,\n    },\n    abstr: {\n        buildNativeClass,\n        copyKeywordsToNamedArgs,\n        checkArgsLen,\n        checkNoArg,\n        checkNoKwargs,\n        checkOneArg,\n        keywordArrayFromPyDict,\n        keywordArrayToPyDict,\n        iter: pyIter,\n        lookupSpecial,\n        typeLookup,\n        setUpModuleMethods,\n    },\n    ffi: { toPy, toJs, proxy },\n} = Sk;\n\nexport type { Args, Kws, CompareOp, BinOp, UnaryOp } from \"./namespace\";\nexport default Sk;","import Sk from \"./types/skulpt/\";\nimport type { pyBaseException, pyStr } from \"./types/skulpt/\";\n\nfunction builtinRead(path: string) {\n    if (\n        Sk.builtinFiles === undefined ||\n        Sk.builtinFiles[\"files\"][path] === undefined\n    )\n        throw \"File not found: '\" + path + \"'\";\n    return Sk.builtinFiles[\"files\"][path];\n}\n\nconst preStyle = `background-color: #f0f0f0; padding: 4px; border: 1px solid lightgrey; margin: 0px`;\n\nexport function setupSkulpt(root: string = \"#website\") {\n    if (typeof Sk === \"undefined\") {\n        console.error(\n            \"Skulpt (global `Sk`) not found. Ensure skulpt.js and skulpt-stdlib.js are loaded before drafter.js (served from your Python assets or a CDN).\"\n        );\n        throw new Error(\"Skulpt not found\");\n    }\n    console.log(Sk);\n    if (typeof Sk.environ == \"undefined\") {\n        Sk.environ = new Sk.builtin.dict();\n    }\n    Sk.environ.set$item(\n        new Sk.builtin.str(\"DRAFTER_SKULPT\"),\n        Sk.builtin.bool.true$\n    );\n\n    Sk.configure({\n        read: builtinRead,\n        __future__: Sk.python3,\n    });\n\n    Sk.inBrowser = false;\n\n    if (typeof Sk.console === \"undefined\") {\n        Sk.console = {};\n    }\n    Sk.console.drafter = {};\n    Sk.console.printPILImage = function (tag: any) {\n        document.body.append(tag.image);\n    };\n    Sk.console.plot = function (chart: any) {\n        let container = document.createElement(\"div\");\n        document.body.append(container);\n        return { html: [container] };\n    };\n    Sk.console.getWidth = function () {\n        return 300;\n    };\n    Sk.console.getHeight = function () {\n        return 300;\n    };\n    Sk.console.drafter.handleError = function (code: any, message: any) {\n        document.body.innerHTML = `<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div><pre style=\"${preStyle}\">${code}: ${message}</pre></div>`;\n    };\n\n    // Example: touch the global so TS keeps types and users see it's available\n    // (no-op to avoid side effects)\n    void Sk;\n}\n\nexport async function startServer(\n    pythonCode: string,\n    mainFilename = \"main\"\n): Promise<void> {\n    try {\n        return Sk.misceval\n            .asyncToPromise(() => {\n                return Sk.importMainWithBody(\n                    mainFilename,\n                    false,\n                    pythonCode,\n                    true\n                );\n            })\n            .then((result) => {\n                console.log(result.$d);\n                return result;\n            })\n            .catch((error) => {\n                showError(error, mainFilename + \".py\", pythonCode);\n            });\n    } catch (error) {\n        showError(error as pyBaseException, mainFilename + \".py\", pythonCode);\n    }\n}\n\nfunction showError(\n    err: pyBaseException,\n    filenameExecuted: string,\n    code: string\n) {\n    console.error(err);\n    console.error(err.args.v[0].v);\n    document.body.innerHTML = [\n        \"<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div>\",\n        presentRunError(err, filenameExecuted, code),\n        \"</div>\",\n    ].join(\"\\n\");\n}\n\nfunction presentRunError(\n    error: pyBaseException,\n    filenameExecuted: string,\n    code: string\n) {\n    let label = error.tp$name;\n    let category = \"runtime\";\n    let message = convertSkulptError(error, filenameExecuted, code);\n\n    return message;\n}\n\nfunction buildTraceback(\n    error: pyBaseException,\n    filenameExecuted: string,\n    code: string\n) {\n    return error.traceback.reverse().map((frame) => {\n        if (!frame) {\n            return \"??\";\n        }\n        let lineno = frame.lineno;\n        let file = `File <code class=\"filename\">\"${frame.filename}\"</code>, `;\n        let line = `on line <code class=\"lineno\">${lineno}</code>, `;\n        let scope =\n            frame.scope !== \"<module>\" && frame.scope !== undefined\n                ? `in scope ${frame.scope}`\n                : \"\";\n        let source = \"\";\n        console.log(filenameExecuted, frame.filename, code);\n        if (frame.source !== undefined) {\n            source = `\\n<pre style=\"${preStyle}\"><code>${frame.source}</code></pre>`;\n        } else if (filenameExecuted === frame.filename && code) {\n            const lines = code.split(\"\\n\");\n            const lineIndex = lineno - 1;\n            const lineContent = lines[lineIndex];\n            source = `\\n<pre style=\"${preStyle}\"><code>${lineContent}</code></pre>`;\n        }\n        return file + line + scope + source;\n    });\n}\n\nfunction convertSkulptError(\n    error: pyBaseException,\n    filenameExecuted: string,\n    code: string\n) {\n    let name = error.tp$name;\n    let args = Sk.ffi.remapToJs(error.args);\n    let top = `${name}: ${args[0]}`;\n    let traceback = \"\";\n    if (name === \"TimeoutError\") {\n        if (error.err && error.err.traceback && error.err.traceback.length) {\n            const allFrames = buildTraceback(error.err, filenameExecuted, code);\n            const result = [\"Traceback:\"];\n            if (allFrames.length > 5) {\n                result.push(\n                    ...allFrames.slice(0, 3),\n                    `... Hiding ${\n                        allFrames.length - 3\n                    } other stack frames ...,`,\n                    ...allFrames.slice(-3, -2)\n                );\n            } else {\n                result.push(...allFrames);\n            }\n            traceback = result.join(\"\\n<br>\");\n        }\n    } else if (error.traceback && error.traceback.length) {\n        traceback =\n            \"<strong>Traceback:</strong><br>\\n\" +\n            buildTraceback(error, filenameExecuted, code).join(\"\\n<br>\");\n    }\n    return `<pre style=\"${preStyle}\">${top}</pre>\\n<br>\\n${traceback}\\n<br>\\n<div>\n    <p><strong>Advice:</strong><br>\n    Some common things to check:\n    <ul>\n    <li>Check your site to make sure it has no errors and runs fine when not deployed.</li>\n    <li>Make sure you are not using third party libraries or modules that are not supported (e.g., <code>threading</code>).</li>\n    <li>Check that you are correctly referencing any files or images you are using.</li>\n    </ul>\n    </p>\n    </div>`;\n}\n\nexport function getSkulptFile(\n    path: string,\n    okayIfNotFound = true\n): string | undefined {\n    if (\n        Sk.builtinFiles !== undefined &&\n        Sk.builtinFiles[\"files\"][path] !== undefined\n    ) {\n        return Sk.builtinFiles[\"files\"][path];\n    } else {\n        if (okayIfNotFound) {\n            return undefined;\n        } else {\n            throw new Error(\"File not found: '\" + path + \"'\");\n        }\n    }\n}\n"],"mappings":"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","names":["src_exports","__export","runStudentCode","pyTrue","pyFalse","pyNone","pyNotImplemented","pyBool","pyBytes","pyDict","pyFloat","pyFrozenSet","pyFunc","pyInt","pyList","pyNoneType","pyMappingProxy","pyModule","pyObject","pySet","pySlice","pyBuiltinFunctionOrMethod","pyStr","pyTuple","pyType","pyClassMethod","pyStaticMethod","pyProperty","pyBaseException","pySystemExit","pyKeyboardInterrupt","pyGeneratorExit","pyException","pyStopIteration","pyStopAsyncIteration","pyArithmeticError","pyFloatingPointError","pyOverflowError","pyZeroDivisionError","pyAssertionError","pyAttributeError","pyBufferError","pyEOFError","pyImportError","pyModuleNotFoundError","pyLookupError","pyIndexError","pyKeyError","pyMemoryError","pyNameError","pyUnboundLocalError","pyOSError","pyFileNotFoundError","pyTimeoutError","pyReferenceError","pyRuntimeError","pyNotImplementedError","pyRecursionError","pySyntaxError","pyIndentationError","pyTabError","pySystemError","pyTypeError","pyValueError","pyUnicodeError","pyUnicodeDecodeError","pyUnicodeEncodeError","pyExternalError","checkString","checkBool","checkInt","checkAnySet","checkBytes","checkCallable","checkIterable","checkNone","pyIsSubclass","pyIsInstance","pyHasAttr","isTrue","Suspension","Break","chainOrSuspend","tryCatchOrSuspend","retryOptionalSuspensionOrThrow","objectRepr","buildPyClass","iterForOrSuspend","iterArray","richCompareBool","pyCall","pyCallOrSuspend","arrayFromIterable","suspensionToPromise","promiseToSuspension","buildNativeClass","copyKeywordsToNamedArgs","checkArgsLen","checkNoArg","checkNoKwargs","checkOneArg","keywordArrayFromPyDict","keywordArrayToPyDict","pyIter","lookupSpecial","typeLookup","setUpModuleMethods","toPy","toJs","proxy","skulpt_default","builtinRead","path","skulpt_default","preStyle","setupSkulpt","root","tag","chart","container","code","message","startServer","pythonCode","mainFilename","result","error","showError","err","filenameExecuted","presentRunError","label","category","convertSkulptError","buildTraceback","frame","lineno","file","line","scope","source","lines","lineIndex","lineContent","name","args","top","traceback","allFrames","x","runStudentCode","options","setupSkulpt","startServer","response","contents"]}