"use strict";var Drafter=(()=>{var u=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var x=(r,e)=>{for(var o in e)u(r,o,{get:e[o],enumerable:!0})},v=(r,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of k(e))!S.call(r,i)&&i!==o&&u(r,i,{get:()=>e[i],enumerable:!(n=b(e,i))||n.enumerable});return r};var F=r=>v(u({},"__esModule",{value:!0}),r);var A={};x(A,{runStudentCode:()=>$});var{builtin:{bool:{true$:B,false$:N},none:{none$:M},NotImplemented:{NotImplemented$:P},bool:C,bytes:R,dict:D,float_:L,frozenset:U,func:j,int_:K,list:_,none:H,mappingproxy:z,module:G,object:J,set:V,slice:W,sk_method:Z,str:q,tuple:Q,type:X,classmethod:Y,staticmethod:rr,property:er,BaseException:or,SystemExit:tr,KeyboardInterrupt:nr,GeneratorExit:ir,Exception:sr,StopIteration:pr,StopAsyncIteration:lr,ArithmeticError:cr,FloatingPointError:ar,OverflowError:ur,ZeroDivisionError:yr,AssertionError:dr,AttributeError:Er,BufferError:fr,EOFError:mr,ImportError:gr,ModuleNotFoundError:hr,LookupError:br,IndexError:kr,KeyError:Sr,MemoryError:xr,NameError:vr,UnboundLocalError:Fr,OSError:Ir,FileNotFoundError:Tr,TimeoutError:wr,ReferenceError:$r,RuntimeError:Ar,NotImplementedError:Or,RecursionError:Br,SyntaxError:Nr,IndentationError:Mr,TabError:Pr,SystemError:Cr,TypeError:Rr,ValueError:Dr,UnicodeError:Lr,UnicodeDecodeError:Ur,UnicodeEncodeError:jr,ExternalError:Kr,checkString:_r,checkBool:Hr,checkInt:zr,checkAnySet:Gr,checkBytes:Jr,checkCallable:Vr,checkIterable:Wr,checkNone:Zr,issubclass:qr,isinstance:Qr,hasattr:Xr},misceval:{isTrue:Yr,Suspension:re,Break:ee,chain:oe,tryCatch:te,retryOptionalSuspensionOrThrow:ne,objectRepr:ie,buildClass:se,iterFor:pe,iterArray:le,richCompareBool:ce,callsimArray:ae,callsimOrSuspendArray:ue,arrayFromIterable:ye,asyncToPromise:de,promiseToSuspension:Ee},abstr:{buildNativeClass:fe,copyKeywordsToNamedArgs:me,checkArgsLen:ge,checkNoArg:he,checkNoKwargs:be,checkOneArg:ke,keywordArrayFromPyDict:Se,keywordArrayToPyDict:xe,iter:ve,lookupSpecial:Fe,typeLookup:Ie,setUpModuleMethods:Te},ffi:{toPy:we,toJs:$e,proxy:Ae}}=Sk,t=Sk;function I(r){if(t.builtinFiles===void 0||t.builtinFiles.files[r]===void 0)throw"File not found: '"+r+"'";return t.builtinFiles.files[r]}var a="background-color: #f0f0f0; padding: 4px; border: 1px solid lightgrey; margin: 0px";function f(r="#website"){if(typeof t>"u")throw console.error("Skulpt (global `Sk`) not found. Ensure skulpt.js and skulpt-stdlib.js are loaded before drafter.js (served from your Python assets or a CDN)."),new Error("Skulpt not found");console.log(t),typeof t.environ>"u"&&(t.environ=new t.builtin.dict),t.environ.set$item(new t.builtin.str("DRAFTER_SKULPT"),t.builtin.bool.true$),t.configure({read:I,__future__:t.python3}),t.inBrowser=!1,typeof t.console>"u"&&(t.console={}),t.console.drafter={},t.console.printPILImage=function(e){document.body.append(e.image)},t.console.plot=function(e){let o=document.createElement("div");return document.body.append(o),{html:[o]}},t.console.getWidth=function(){return 300},t.console.getHeight=function(){return 300},t.console.drafter.handleError=function(e,o){document.body.innerHTML=`<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div><pre style="${a}">${e}: ${o}</pre></div>`}}async function y(r,e="main"){try{return t.misceval.asyncToPromise(()=>t.importMainWithBody(e,!1,r,!0)).then(o=>(console.log(o.$d),o)).catch(o=>{d(o,e+".py",r)})}catch(o){d(o,e+".py",r)}}function d(r,e,o){console.error(r),console.error(r.args.v[0].v),document.body.innerHTML=["<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div>",T(r,e,o),"</div>"].join(`
`)}function T(r,e,o){let n=r.tp$name,i="runtime";return w(r,e,o)}function E(r,e,o){return r.traceback.reverse().map(n=>{if(!n)return"??";let i=n.lineno,c=`File <code class="filename">"${n.filename}"</code>, `,l=`on line <code class="lineno">${i}</code>, `,s=n.scope!=="<module>"&&n.scope!==void 0?`in scope ${n.scope}`:"",p="";if(console.log(e,n.filename,o),n.source!==void 0)p=`
<pre style="${a}"><code>${n.source}</code></pre>`;else if(e===n.filename&&o){let m=o.split(`
`),g=i-1,h=m[g];p=`
<pre style="${a}"><code>${h}</code></pre>`}return c+l+s+p})}function w(r,e,o){let n=r.tp$name,i=t.ffi.remapToJs(r.args),c=`${n}: ${i[0]}`,l="";if(n==="TimeoutError"){if(r.err&&r.err.traceback&&r.err.traceback.length){let s=E(r.err,e,o),p=["Traceback:"];s.length>5?p.push(...s.slice(0,3),`... Hiding ${s.length-3} other stack frames ...,`,...s.slice(-3,-2)):p.push(...s),l=p.join(`
<br>`)}}else r.traceback&&r.traceback.length&&(l=`<strong>Traceback:</strong><br>
`+E(r,e,o).join(`
<br>`));return`<pre style="${a}">${c}</pre>
<br>
${l}
<br>
<div>
    <p><strong>Advice:</strong><br>
    Some common things to check:
    <ul>
    <li>Check your site to make sure it has no errors and runs fine when not deployed.</li>
    <li>Make sure you are not using third party libraries or modules that are not supported (e.g., <code>threading</code>).</li>
    <li>Check that you are correctly referencing any files or images you are using.</li>
    </ul>
    </p>
    </div>`}var Ce=new Sk.builtin.str("hello");function $(r){if(f(),r.code)return y(r.code,"main");if(r.url)return fetch(r.url).then(e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return e.text()}).then(e=>y(e,"main"));throw new Error("Either code or url must be provided");console.log("Drafter setup complete.")}return F(A);})();
//# sourceMappingURL=drafter.js.map