"use strict";var Drafter=(()=>{var u=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var x=(r,o)=>{for(var e in o)u(r,e,{get:o[e],enumerable:!0})},T=(r,o,e,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of k(o))!S.call(r,i)&&i!==e&&u(r,i,{get:()=>o[i],enumerable:!(n=b(o,i))||n.enumerable});return r};var v=r=>T(u({},"__esModule",{value:!0}),r);var A={};x(A,{startDrafter:()=>$});var{builtin:{bool:{true$:B,false$:N},none:{none$:M},NotImplemented:{NotImplemented$:P},bool:C,bytes:D,dict:L,float_:R,frozenset:U,func:j,int_:H,list:K,none:_,mappingproxy:z,module:G,object:J,set:V,slice:W,sk_method:Z,str:q,tuple:Q,type:X,classmethod:Y,staticmethod:rr,property:er,BaseException:or,SystemExit:tr,KeyboardInterrupt:nr,GeneratorExit:ir,Exception:sr,StopIteration:lr,StopAsyncIteration:pr,ArithmeticError:cr,FloatingPointError:ar,OverflowError:ur,ZeroDivisionError:yr,AssertionError:dr,AttributeError:Er,BufferError:fr,EOFError:mr,ImportError:gr,ModuleNotFoundError:hr,LookupError:br,IndexError:kr,KeyError:Sr,MemoryError:xr,NameError:Tr,UnboundLocalError:vr,OSError:wr,FileNotFoundError:Fr,TimeoutError:Ir,ReferenceError:$r,RuntimeError:Ar,NotImplementedError:Or,RecursionError:Br,SyntaxError:Nr,IndentationError:Mr,TabError:Pr,SystemError:Cr,TypeError:Dr,ValueError:Lr,UnicodeError:Rr,UnicodeDecodeError:Ur,UnicodeEncodeError:jr,ExternalError:Hr,checkString:Kr,checkBool:_r,checkInt:zr,checkAnySet:Gr,checkBytes:Jr,checkCallable:Vr,checkIterable:Wr,checkNone:Zr,issubclass:qr,isinstance:Qr,hasattr:Xr},misceval:{isTrue:Yr,Suspension:re,Break:ee,chain:oe,tryCatch:te,retryOptionalSuspensionOrThrow:ne,objectRepr:ie,buildClass:se,iterFor:le,iterArray:pe,richCompareBool:ce,callsimArray:ae,callsimOrSuspendArray:ue,arrayFromIterable:ye,asyncToPromise:de,promiseToSuspension:Ee},abstr:{buildNativeClass:fe,copyKeywordsToNamedArgs:me,checkArgsLen:ge,checkNoArg:he,checkNoKwargs:be,checkOneArg:ke,keywordArrayFromPyDict:Se,keywordArrayToPyDict:xe,iter:Te,lookupSpecial:ve,typeLookup:we,setUpModuleMethods:Fe},ffi:{toPy:Ie,toJs:$e,proxy:Ae}}=Sk,t=Sk;function w(r){if(t.builtinFiles===void 0||t.builtinFiles.files[r]===void 0)throw"File not found: '"+r+"'";return t.builtinFiles.files[r]}var a="background-color: #f0f0f0; padding: 4px; border: 1px solid lightgrey; margin: 0px";function f(r="#website"){if(typeof t>"u")throw console.error("Skulpt (global `Sk`) not found. Ensure skulpt.js and skulpt-stdlib.js are loaded before drafter.js (served from your Python assets or a CDN)."),new Error("Skulpt not found");console.log(t),typeof t.environ>"u"&&(t.environ=new t.builtin.dict),t.environ.set$item(new t.builtin.str("DRAFTER_SKULPT"),t.builtin.bool.true$),t.configure({read:w,__future__:t.python3}),t.inBrowser=!1,typeof t.console>"u"&&(t.console={}),t.console.drafter={},t.console.printPILImage=function(o){document.body.append(o.image)},t.console.plot=function(o){let e=document.createElement("div");return document.body.append(e),{html:[e]}},t.console.getWidth=function(){return 300},t.console.getHeight=function(){return 300},t.console.drafter.handleError=function(o,e){document.body.innerHTML=`<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div><pre style="${a}">${o}: ${e}</pre></div>`}}async function y(r,o="main"){try{return t.misceval.asyncToPromise(()=>t.importMainWithBody(o,!1,r,!0)).then(e=>(console.log(e.$d),e)).catch(e=>{d(e,o+".py",r)})}catch(e){d(e,o+".py",r)}}function d(r,o,e){console.error(r),console.error(r.args.v[0].v),document.body.innerHTML=["<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div>",F(r,o,e),"</div>"].join(`
`)}function F(r,o,e){let n=r.tp$name,i="runtime";return I(r,o,e)}function E(r,o,e){return r.traceback.reverse().map(n=>{if(!n)return"??";let i=n.lineno,c=`File <code class="filename">"${n.filename}"</code>, `,p=`on line <code class="lineno">${i}</code>, `,s=n.scope!=="<module>"&&n.scope!==void 0?`in scope ${n.scope}`:"",l="";if(console.log(o,n.filename,e),n.source!==void 0)l=`
<pre style="${a}"><code>${n.source}</code></pre>`;else if(o===n.filename&&e){let m=e.split(`
`),g=i-1,h=m[g];l=`
<pre style="${a}"><code>${h}</code></pre>`}return c+p+s+l})}function I(r,o,e){let n=r.tp$name,i=t.ffi.remapToJs(r.args),c=`${n}: ${i[0]}`,p="";if(n==="TimeoutError"){if(r.err&&r.err.traceback&&r.err.traceback.length){let s=E(r.err,o,e),l=["Traceback:"];s.length>5?l.push(...s.slice(0,3),`... Hiding ${s.length-3} other stack frames ...,`,...s.slice(-3,-2)):l.push(...s),p=l.join(`
<br>`)}}else r.traceback&&r.traceback.length&&(p=`<strong>Traceback:</strong><br>
`+E(r,o,e).join(`
<br>`));return`<pre style="${a}">${c}</pre>
<br>
${p}
<br>
<div>
    <p><strong>Advice:</strong><br>
    Some common things to check:
    <ul>
    <li>Check your site to make sure it has no errors and runs fine when not deployed.</li>
    <li>Make sure you are not using third party libraries or modules that are not supported (e.g., <code>threading</code>).</li>
    <li>Check that you are correctly referencing any files or images you are using.</li>
    </ul>
    </p>
    </div>`}var Ce=new Sk.builtin.str("hello");function $(r){if(f(),!(typeof r.target=="string"?document.querySelector(r.target):r.target))throw new Error("Target element not found");if(r.code)return y(r.code,"main");if(r.url)return fetch(r.url).then(e=>{if(!e.ok)throw new Error("Network response was not ok "+e.statusText);return e.text()}).then(e=>y(e,"main"));throw new Error("Either code or url must be provided");console.log("Drafter setup complete.")}return v(A);})();
//# sourceMappingURL=drafter.js.map