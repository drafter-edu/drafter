var Drafter=(()=>{var An=Object.create;var He=Object.defineProperty;var Dn=Object.getOwnPropertyDescriptor;var $n=Object.getOwnPropertyNames;var Mn=Object.getPrototypeOf,jn=Object.prototype.hasOwnProperty;var et=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Un=(r,t)=>{for(var n in t)He(r,n,{get:t[n],enumerable:!0})},$t=(r,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of $n(t))!jn.call(r,i)&&i!==n&&He(r,i,{get:()=>t[i],enumerable:!(e=Dn(t,i))||e.enumerable});return r};var Mt=(r,t,n)=>(n=r!=null?An(Mn(r)):{},$t(t||!r||!r.__esModule?He(n,"default",{value:r,enumerable:!0}):n,r)),Bn=r=>$t(He({},"__esModule",{value:!0}),r);var Nn=et(Rt=>{(function(r){var t=/\S/,n=/\"/g,e=/\n/g,i=/\r/g,s=/\\/g,o=/\u2028/,a=/\u2029/;r.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},r.scan=function(b,y){var E=b.length,$=0,G=1,B=2,N=$,_=null,V=null,M="",H=[],X=!1,A=0,S=0,F="{{",w="}}";function te(){M.length>0&&(H.push({tag:"_t",text:new String(M)}),M="")}function Re(){for(var J=!0,Q=S;Q<H.length;Q++)if(J=r.tags[H[Q].tag]<r.tags._v||H[Q].tag=="_t"&&H[Q].text.match(t)===null,!J)return!1;return J}function Pe(J,Q){if(te(),J&&Re())for(var ne=S,fe;ne<H.length;ne++)H[ne].text&&((fe=H[ne+1])&&fe.tag==">"&&(fe.indent=H[ne].text.toString()),H.splice(ne,1));else Q||H.push({tag:`
`});X=!1,S=H.length}function ue(J,Q){var ne="="+w,fe=J.indexOf(ne,Q),Ze=u(J.substring(J.indexOf("=",Q)+1,fe)).split(" ");return F=Ze[0],w=Ze[Ze.length-1],fe+ne.length-1}for(y&&(y=y.split(" "),F=y[0],w=y[1]),A=0;A<E;A++)N==$?f(F,b,A)?(--A,te(),N=G):b.charAt(A)==`
`?Pe(X):M+=b.charAt(A):N==G?(A+=F.length-1,V=r.tags[b.charAt(A+1)],_=V?b.charAt(A+1):"_v",_=="="?(A=ue(b,A),N=$):(V&&A++,N=B),X=A):f(w,b,A)?(H.push({tag:_,n:u(M),otag:F,ctag:w,i:_=="/"?X-F.length:A+w.length}),M="",A+=w.length-1,N=$,_=="{"&&(w=="}}"?A++:l(H[H.length-1]))):M+=b.charAt(A);return Pe(X,!0),H};function l(g){g.n.substr(g.n.length-1)==="}"&&(g.n=g.n.substring(0,g.n.length-1))}function u(g){return g.trim?g.trim():g.replace(/^\s*|\s*$/g,"")}function f(g,b,y){if(b.charAt(y)!=g.charAt(0))return!1;for(var E=1,$=g.length;E<$;E++)if(b.charAt(y+E)!=g.charAt(E))return!1;return!0}var c={_t:!0,"\n":!0,$:!0,"/":!0};function d(g,b,y,E){var $=[],G=null,B=null,N=null;for(B=y[y.length-1];g.length>0;){if(N=g.shift(),B&&B.tag=="<"&&!(N.tag in c))throw new Error("Illegal content in < super tag.");if(r.tags[N.tag]<=r.tags.$||h(N,E))y.push(N),N.nodes=d(g,N.tag,y,E);else if(N.tag=="/"){if(y.length===0)throw new Error("Closing tag without opener: /"+N.n);if(G=y.pop(),N.n!=G.n&&!p(N.n,G.n,E))throw new Error("Nesting error: "+G.n+" vs. "+N.n);return G.end=N.i,$}else N.tag==`
`&&(N.last=g.length==0||g[0].tag==`
`);$.push(N)}if(y.length>0)throw new Error("missing closing tag: "+y.pop().n);return $}function h(g,b){for(var y=0,E=b.length;y<E;y++)if(b[y].o==g.n)return g.tag="#",!0}function p(g,b,y){for(var E=0,$=y.length;E<$;E++)if(y[E].c==g&&y[E].o==b)return!0}function m(g){var b=[];for(var y in g)b.push('"'+C(y)+'": function(c,p,t,i) {'+g[y]+"}");return"{ "+b.join(",")+" }"}function v(g){var b=[];for(var y in g.partials)b.push('"'+C(y)+'":{name:"'+C(g.partials[y].name)+'", '+v(g.partials[y])+"}");return"partials: {"+b.join(",")+"}, subs: "+m(g.subs)}r.stringify=function(g,b,y){return"{code: function (c,p,i) { "+r.wrapMain(g.code)+" },"+v(g)+"}"};var O=0;r.generate=function(g,b,y){O=0;var E={code:"",subs:{},partials:{}};return r.walk(g,E),y.asString?this.stringify(E,b,y):this.makeTemplate(E,b,y)},r.wrapMain=function(g){return'var t=this;t.b(i=i||"");'+g+"return t.fl();"},r.template=r.Template,r.makeTemplate=function(g,b,y){var E=this.makePartials(g);return E.code=new Function("c","p","i",this.wrapMain(g.code)),new this.template(E,b,this,y)},r.makePartials=function(g){var b,y={subs:{},partials:g.partials,name:g.name};for(b in y.partials)y.partials[b]=this.makePartials(y.partials[b]);for(b in g.subs)y.subs[b]=new Function("c","p","t","i",g.subs[b]);return y};function C(g){return g.replace(s,"\\\\").replace(n,'\\"').replace(e,"\\n").replace(i,"\\r").replace(o,"\\u2028").replace(a,"\\u2029")}function I(g){return~g.indexOf(".")?"d":"f"}function L(g,b){var y="<"+(b.prefix||""),E=y+g.n+O++;return b.partials[E]={name:g.n,partials:{}},b.code+='t.b(t.rp("'+C(E)+'",c,p,"'+(g.indent||"")+'"));',E}r.codegen={"#":function(g,b){b.code+="if(t.s(t."+I(g.n)+'("'+C(g.n)+'",c,p,1),c,p,0,'+g.i+","+g.end+',"'+g.otag+" "+g.ctag+'")){t.rs(c,p,function(c,p,t){',r.walk(g.nodes,b),b.code+="});c.pop();}"},"^":function(g,b){b.code+="if(!t.s(t."+I(g.n)+'("'+C(g.n)+'",c,p,1),c,p,1,0,0,"")){',r.walk(g.nodes,b),b.code+="};"},">":L,"<":function(g,b){var y={partials:{},code:"",subs:{},inPartial:!0};r.walk(g.nodes,y);var E=b.partials[L(g,b)];E.subs=y.subs,E.partials=y.partials},$:function(g,b){var y={subs:{},code:"",partials:b.partials,prefix:g.n};r.walk(g.nodes,y),b.subs[g.n]=y.code,b.inPartial||(b.code+='t.sub("'+C(g.n)+'",c,p,i);')},"\n":function(g,b){b.code+=W('"\\n"'+(g.last?"":" + i"))},_v:function(g,b){b.code+="t.b(t.v(t."+I(g.n)+'("'+C(g.n)+'",c,p,0)));'},_t:function(g,b){b.code+=W('"'+C(g.text)+'"')},"{":R,"&":R};function R(g,b){b.code+="t.b(t.t(t."+I(g.n)+'("'+C(g.n)+'",c,p,0)));'}function W(g){return"t.b("+g+");"}r.walk=function(g,b){for(var y,E=0,$=g.length;E<$;E++)y=r.codegen[g[E].tag],y&&y(g[E],b);return b},r.parse=function(g,b,y){return y=y||{},d(g,"",[],y.sectionTags||[])},r.cache={},r.cacheKey=function(g,b){return[g,!!b.asString,!!b.disableLambda,b.delimiters,!!b.modelGet].join("||")},r.compile=function(g,b){b=b||{};var y=r.cacheKey(g,b),E=this.cache[y];if(E){var $=E.partials;for(var G in $)delete $[G].instance;return E}return E=this.generate(this.parse(this.scan(g,b.delimiters),g,b),g,b),this.cache[y]=E}})(typeof Rt<"u"?Rt:Hogan)});var On=et(Pt=>{var Kr={};(function(r){r.Template=function(d,h,p,m){d=d||{},this.r=d.code||this.r,this.c=p,this.options=m||{},this.text=h||"",this.partials=d.partials||{},this.subs=d.subs||{},this.buf=""},r.Template.prototype={r:function(d,h,p){return""},v:f,t:u,render:function(h,p,m){return this.ri([h],p||{},m)},ri:function(d,h,p){return this.r(d,h,p)},ep:function(d,h){var p=this.partials[d],m=h[p.name];if(p.instance&&p.base==m)return p.instance;if(typeof m=="string"){if(!this.c)throw new Error("No compiler available.");m=this.c.compile(m,this.options)}if(!m)return null;if(this.partials[d].base=m,p.subs){h.stackText||(h.stackText={});for(key in p.subs)h.stackText[key]||(h.stackText[key]=this.activeSub!==void 0&&h.stackText[this.activeSub]?h.stackText[this.activeSub]:this.text);m=n(m,p.subs,p.partials,this.stackSubs,this.stackPartials,h.stackText)}return this.partials[d].instance=m,m},rp:function(d,h,p,m){var v=this.ep(d,p);return v?v.ri(h,p,m):""},rs:function(d,h,p){var m=d[d.length-1];if(!c(m)){p(d,h,this);return}for(var v=0;v<m.length;v++)d.push(m[v]),p(d,h,this),d.pop()},s:function(d,h,p,m,v,O,C){var I;return c(d)&&d.length===0?!1:(typeof d=="function"&&(d=this.ms(d,h,p,m,v,O,C)),I=!!d,!m&&I&&h&&h.push(typeof d=="object"?d:h[h.length-1]),I)},d:function(d,h,p,m){var v,O=d.split("."),C=this.f(O[0],h,p,m),I=this.options.modelGet,L=null;if(d==="."&&c(h[h.length-2]))C=h[h.length-1];else for(var R=1;R<O.length;R++)v=t(O[R],C,I),v!==void 0?(L=C,C=v):C="";return m&&!C?!1:(!m&&typeof C=="function"&&(h.push(L),C=this.mv(C,h,p),h.pop()),C)},f:function(d,h,p,m){for(var v=!1,O=null,C=!1,I=this.options.modelGet,L=h.length-1;L>=0;L--)if(O=h[L],v=t(d,O,I),v!==void 0){C=!0;break}return C?(!m&&typeof v=="function"&&(v=this.mv(v,h,p)),v):m?!1:""},ls:function(d,h,p,m,v){var O=this.options.delimiters;return this.options.delimiters=v,this.b(this.ct(u(d.call(h,m)),h,p)),this.options.delimiters=O,!1},ct:function(d,h,p){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(d,this.options).render(h,p)},b:function(d){this.buf+=d},fl:function(){var d=this.buf;return this.buf="",d},ms:function(d,h,p,m,v,O,C){var I,L=h[h.length-1],R=d.call(L);return typeof R=="function"?m?!0:(I=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(R,L,p,I.substring(v,O),C)):R},mv:function(d,h,p){var m=h[h.length-1],v=d.call(m);return typeof v=="function"?this.ct(u(v.call(m)),m,p):v},sub:function(d,h,p,m){var v=this.subs[d];v&&(this.activeSub=d,v(h,p,this,m),this.activeSub=!1)}};function t(d,h,p){var m;return h&&typeof h=="object"&&(h[d]!==void 0?m=h[d]:p&&h.get&&typeof h.get=="function"&&(m=h.get(d))),m}function n(d,h,p,m,v,O){function C(){}C.prototype=d;function I(){}I.prototype=d.subs;var L,R=new C;R.subs=new I,R.subsText={},R.buf="",m=m||{},R.stackSubs=m,R.subsText=O;for(L in h)m[L]||(m[L]=h[L]);for(L in m)R.subs[L]=m[L];v=v||{},R.stackPartials=v;for(L in p)v[L]||(v[L]=p[L]);for(L in v)R.partials[L]=v[L];return R}var e=/&/g,i=/</g,s=/>/g,o=/\'/g,a=/\"/g,l=/[&<>\"\']/;function u(d){return String(d??"")}function f(d){return d=u(d),l.test(d)?d.replace(e,"&amp;").replace(i,"&lt;").replace(s,"&gt;").replace(o,"&#39;").replace(a,"&quot;"):d}var c=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"}})(typeof Pt<"u"?Pt:Kr)});var Ht=et((Go,Fn)=>{var Xe=Nn();Xe.Template=On().Template;Xe.template=Xe.Template;Fn.exports=Xe});var Qr={};Un(Qr,{runStudentCode:()=>Yr});var{DebugPanel:ei,builtin:{bool:{true$:ti,false$:ni},none:{none$:ri},NotImplemented:{NotImplemented$:ii},bool:si,bytes:oi,dict:ai,float_:li,frozenset:ui,func:fi,int_:ci,list:di,none:hi,mappingproxy:pi,module:gi,object:mi,set:bi,slice:vi,sk_method:yi,str:xi,tuple:wi,type:Si,classmethod:Li,staticmethod:Ei,property:Ci,BaseException:Ti,SystemExit:Ni,KeyboardInterrupt:Oi,GeneratorExit:Fi,Exception:Ii,StopIteration:Ri,StopAsyncIteration:Pi,ArithmeticError:Hi,FloatingPointError:ki,OverflowError:Ai,ZeroDivisionError:Di,AssertionError:$i,AttributeError:Mi,BufferError:ji,EOFError:Ui,ImportError:Bi,ModuleNotFoundError:zi,LookupError:Wi,IndexError:Vi,KeyError:Ki,MemoryError:Gi,NameError:Ji,UnboundLocalError:_i,OSError:Xi,FileNotFoundError:qi,TimeoutError:Yi,ReferenceError:Qi,RuntimeError:Zi,NotImplementedError:es,RecursionError:ts,SyntaxError:ns,IndentationError:rs,TabError:is,SystemError:ss,TypeError:os,ValueError:as,UnicodeError:ls,UnicodeDecodeError:us,UnicodeEncodeError:fs,ExternalError:cs,checkString:ds,checkBool:hs,checkInt:ps,checkAnySet:gs,checkBytes:ms,checkCallable:bs,checkIterable:vs,checkNone:ys,issubclass:xs,isinstance:ws,hasattr:Ss},misceval:{isTrue:Ls,Suspension:Es,Break:Cs,chain:Ts,tryCatch:Ns,retryOptionalSuspensionOrThrow:Os,objectRepr:Fs,buildClass:Is,iterFor:Rs,iterArray:Ps,richCompareBool:Hs,callsimArray:ks,callsimOrSuspendArray:As,arrayFromIterable:Ds,asyncToPromise:$s,promiseToSuspension:Ms},abstr:{buildNativeClass:js,copyKeywordsToNamedArgs:Us,checkArgsLen:Bs,checkNoArg:zs,checkNoKwargs:Ws,checkOneArg:Vs,keywordArrayFromPyDict:Ks,keywordArrayToPyDict:Gs,iter:Js,lookupSpecial:_s,typeLookup:Xs,setUpModuleMethods:qs},ffi:{toPy:Ys,toJs:Qs,proxy:Zs}}=Sk,P=Sk;var T=r=>typeof r=="string",xe=()=>{let r,t,n=new Promise((e,i)=>{r=e,t=i});return n.resolve=r,n.reject=t,n},jt=r=>r==null?"":""+r,zn=(r,t,n)=>{r.forEach(e=>{t[e]&&(n[e]=t[e])})},Wn=/###/g,Ut=r=>r&&r.indexOf("###")>-1?r.replace(Wn,"."):r,Bt=r=>!r||T(r),we=(r,t,n)=>{let e=T(t)?t.split("."):t,i=0;for(;i<e.length-1;){if(Bt(r))return{};let s=Ut(e[i]);!r[s]&&n&&(r[s]=new n),Object.prototype.hasOwnProperty.call(r,s)?r=r[s]:r={},++i}return Bt(r)?{}:{obj:r,k:Ut(e[i])}},zt=(r,t,n)=>{let{obj:e,k:i}=we(r,t,Object);if(e!==void 0||t.length===1){e[i]=n;return}let s=t[t.length-1],o=t.slice(0,t.length-1),a=we(r,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=we(r,o,Object),a?.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},Vn=(r,t,n,e)=>{let{obj:i,k:s}=we(r,t,Object);i[s]=i[s]||[],i[s].push(n)},Ae=(r,t)=>{let{obj:n,k:e}=we(r,t);if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e]},Kn=(r,t,n)=>{let e=Ae(r,n);return e!==void 0?e:Ae(t,n)},qt=(r,t,n)=>{for(let e in t)e!=="__proto__"&&e!=="constructor"&&(e in r?T(r[e])||r[e]instanceof String||T(t[e])||t[e]instanceof String?n&&(r[e]=t[e]):qt(r[e],t[e],n):r[e]=t[e]);return r},ce=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Gn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Jn=r=>T(r)?r.replace(/[&<>"'\/]/g,t=>Gn[t]):r,rt=class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){let n=this.regExpMap.get(t);if(n!==void 0)return n;let e=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,e),this.regExpQueue.push(t),e}},_n=[" ",",","?","!",";"],Xn=new rt(20),qn=(r,t,n)=>{t=t||"",n=n||"";let e=_n.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(e.length===0)return!0;let i=Xn.getRegExp(`(${e.map(o=>o==="?"?"\\?":o).join("|")})`),s=!i.test(r);if(!s){let o=r.indexOf(n);o>0&&!i.test(r.substring(0,o))&&(s=!0)}return s},it=(r,t,n=".")=>{if(!r)return;if(r[t])return Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0;let e=t.split(n),i=r;for(let s=0;s<e.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<e.length;++l)if(l!==s&&(a+=n),a+=e[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<e.length-1)continue;s+=l-s+1;break}i=o}return i},Se=r=>r?.replace("_","-"),Yn={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,t){console?.[r]?.apply?.(console,t)}},st=class r{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||Yn,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,e,i){return i&&!this.debug?null:(T(t[0])&&(t[0]=`${e}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new r(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new r(this.logger,t)}},Z=new st,de=class{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);let i=this.observers[e].get(n)||0;this.observers[e].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i.apply(i,[t,...n])})}},De=class extends de{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,e,i={}){let s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure,a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],e&&(Array.isArray(e)?a.push(...e):T(e)&&s?a.push(...e.split(s)):a.push(e)));let l=Ae(this.data,a);return!l&&!n&&!e&&t.indexOf(".")>-1&&(t=a[0],n=a[1],e=a.slice(2).join(".")),l||!o||!T(e)?l:it(this.data?.[t]?.[n],e,s)}addResource(t,n,e,i,s={silent:!1}){let o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=[t,n];e&&(a=a.concat(o?e.split(o):e)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),zt(this.data,a,i),s.silent||this.emit("added",t,n,e,i)}addResources(t,n,e,i={silent:!1}){for(let s in e)(T(e[s])||Array.isArray(e[s]))&&this.addResource(t,n,s,e[s],{silent:!0});i.silent||this.emit("added",t,n,e)}addResourceBundle(t,n,e,i,s,o={silent:!1,skipCopy:!1}){let a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=e,e=n,n=a[1]),this.addNamespaces(n);let l=Ae(this.data,a)||{};o.skipCopy||(e=JSON.parse(JSON.stringify(e))),i?qt(l,e,s):l={...l,...e},zt(this.data,a,l),o.silent||this.emit("added",t,n,e)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}},Yt={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,t,n,e,i){return r.forEach(s=>{t=this.processors[s]?.process(t,n,e,i)??t}),t}},Qt=Symbol("i18next/PATH_KEY");function Qn(){let r=[],t=Object.create(null),n;return t.get=(e,i)=>(n?.revoke?.(),i===Qt?r:(r.push(i),n=Proxy.revocable(e,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}function ot(r,t){let{[Qt]:n}=r(Qn());return n.join(t?.keySeparator??".")}var Wt={},tt=r=>!T(r)&&typeof r!="boolean"&&typeof r!="number",$e=class r extends de{constructor(t,n={}){super(),zn(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Z.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){let e={...n};if(t==null)return!1;let i=this.resolve(t,e);if(i?.res===void 0)return!1;let s=tt(i.res);return!(e.returnObjects===!1&&s)}extractFromKey(t,n){let e=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;e===void 0&&(e=":");let i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,s=n.ns||this.options.defaultNS||[],o=e&&t.indexOf(e)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!qn(t,e,i);if(o&&!a){let l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:T(s)?[s]:s};let u=t.split(e);(e!==i||e===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),t=u.join(i)}return{key:t,namespaces:T(s)?[s]:s}}translate(t,n,e){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=ot(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);let s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(t[t.length-1],i),u=l[l.length-1],f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");let c=i.lng||this.language,d=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c?.toLowerCase()==="cimode")return d?s?{res:`${u}${f}${a}`,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:`${u}${f}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:c,usedNS:u,usedParams:this.getUsedParamsDetails(i)}:a;let h=this.resolve(t,i),p=h?.res,m=h?.usedKey||a,v=h?.exactUsedKey||a,O=["[object Number]","[object Function]","[object RegExp]"],C=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,I=!this.i18nFormat||this.i18nFormat.handleAsObject,L=i.count!==void 0&&!T(i.count),R=r.hasDefaultValue(i),W=L?this.pluralResolver.getSuffix(c,i.count,i):"",g=i.ordinal&&L?this.pluralResolver.getSuffix(c,i.count,{ordinal:!1}):"",b=L&&!i.ordinal&&i.count===0,y=b&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${W}`]||i[`defaultValue${g}`]||i.defaultValue,E=p;I&&!p&&R&&(E=y);let $=tt(E),G=Object.prototype.toString.apply(E);if(I&&E&&$&&O.indexOf(G)<0&&!(T(C)&&Array.isArray(E))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,E,{...i,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(h.res=B,h.usedParams=this.getUsedParamsDetails(i),h):B}if(o){let B=Array.isArray(E),N=B?[]:{},_=B?v:m;for(let V in E)if(Object.prototype.hasOwnProperty.call(E,V)){let M=`${_}${o}${V}`;R&&!p?N[V]=this.translate(M,{...i,defaultValue:tt(y)?y[V]:void 0,joinArrays:!1,ns:l}):N[V]=this.translate(M,{...i,joinArrays:!1,ns:l}),N[V]===M&&(N[V]=E[V])}p=N}}else if(I&&T(C)&&Array.isArray(p))p=p.join(C),p&&(p=this.extendTranslation(p,t,i,e));else{let B=!1,N=!1;!this.isValidLookup(p)&&R&&(B=!0,p=y),this.isValidLookup(p)||(N=!0,p=a);let V=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:p,M=R&&y!==p&&this.options.updateMissing;if(N||B||M){if(this.logger.log(M?"updateKey":"missingKey",c,u,a,M?y:p),o){let S=this.resolve(a,{...i,keySeparator:!1});S&&S.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let H=[],X=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&X&&X[0])for(let S=0;S<X.length;S++)H.push(X[S]);else this.options.saveMissingTo==="all"?H=this.languageUtils.toResolveHierarchy(i.lng||this.language):H.push(i.lng||this.language);let A=(S,F,w)=>{let te=R&&w!==p?w:V;this.options.missingKeyHandler?this.options.missingKeyHandler(S,u,F,te,M,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(S,u,F,te,M,i),this.emit("missingKey",S,u,F,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&L?H.forEach(S=>{let F=this.pluralResolver.getSuffixes(S,i);b&&i[`defaultValue${this.options.pluralSeparator}zero`]&&F.indexOf(`${this.options.pluralSeparator}zero`)<0&&F.push(`${this.options.pluralSeparator}zero`),F.forEach(w=>{A([S],a+w,i[`defaultValue${w}`]||y)})}):A(H,a,y))}p=this.extendTranslation(p,t,i,h,e),N&&p===a&&this.options.appendNamespaceToMissingKey&&(p=`${u}${f}${a}`),(N||B)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${f}${a}`:a,B?p:void 0,i))}return s?(h.res=p,h.usedParams=this.getUsedParamsDetails(i),h):p}extendTranslation(t,n,e,i,s){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...e},e.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!e.skipInterpolation){e.interpolation&&this.interpolator.init({...e,interpolation:{...this.options.interpolation,...e.interpolation}});let l=T(t)&&(e?.interpolation?.skipOnVariables!==void 0?e.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(l){let c=t.match(this.interpolator.nestingRegexp);u=c&&c.length}let f=e.replace&&!T(e.replace)?e.replace:e;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,e.lng||this.language||i.usedLng,e),l){let c=t.match(this.interpolator.nestingRegexp),d=c&&c.length;u<d&&(e.nest=!1)}!e.lng&&i&&i.res&&(e.lng=this.language||i.usedLng),e.nest!==!1&&(t=this.interpolator.nest(t,(...c)=>s?.[0]===c[0]&&!e.context?(this.logger.warn(`It seems you are nesting recursively key: ${c[0]} in key: ${n[0]}`),null):this.translate(...c,n),e)),e.interpolation&&this.interpolator.reset()}let o=e.postProcess||this.options.postProcess,a=T(o)?[o]:o;return t!=null&&a?.length&&e.applyPostProcessor!==!1&&(t=Yt.handle(a,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(e)},...e}:e,this)),t}resolve(t,n={}){let e,i,s,o,a;return T(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(e))return;let u=this.extractFromKey(l,n),f=u.key;i=f;let c=u.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));let d=n.count!==void 0&&!T(n.count),h=d&&!n.ordinal&&n.count===0,p=n.context!==void 0&&(T(n.context)||typeof n.context=="number")&&n.context!=="",m=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);c.forEach(v=>{this.isValidLookup(e)||(a=v,!Wt[`${m[0]}-${v}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(Wt[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(O=>{if(this.isValidLookup(e))return;o=O;let C=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,f,O,v,n);else{let L;d&&(L=this.pluralResolver.getSuffix(O,n.count,n));let R=`${this.options.pluralSeparator}zero`,W=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(n.ordinal&&L.indexOf(W)===0&&C.push(f+L.replace(W,this.options.pluralSeparator)),C.push(f+L),h&&C.push(f+R)),p){let g=`${f}${this.options.contextSeparator||"_"}${n.context}`;C.push(g),d&&(n.ordinal&&L.indexOf(W)===0&&C.push(g+L.replace(W,this.options.pluralSeparator)),C.push(g+L),h&&C.push(g+R))}}let I;for(;I=C.pop();)this.isValidLookup(e)||(s=I,e=this.getResource(O,v,I,n))}))})}),{res:e,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,e,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,e,i):this.resourceStore.getResource(t,n,e,i)}getUsedParamsDetails(t={}){let n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],e=t.replace&&!T(t.replace),i=e?t.replace:t;if(e&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!e){i={...i};for(let s of n)delete i[s]}return i}static hasDefaultValue(t){let n="defaultValue";for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&n===e.substring(0,n.length)&&t[e]!==void 0)return!0;return!1}},Me=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Z.create("languageUtils")}getScriptPartFromCode(t){if(t=Se(t),!t||t.indexOf("-")<0)return null;let n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Se(t),!t||t.indexOf("-")<0)return t;let n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(T(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(e=>{if(n)return;let i=this.formatLanguageCode(e);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(e=>{if(n)return;let i=this.getScriptPartFromCode(e);if(this.isSupportedCode(i))return n=i;let s=this.getLanguagePartFromCode(e);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),T(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let e=t[n];return e||(e=t[this.getScriptPartFromCode(n)]),e||(e=t[this.formatLanguageCode(n)]),e||(e=t[this.getLanguagePartFromCode(n)]),e||(e=t.default),e||[]}toResolveHierarchy(t,n){let e=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return T(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):T(t)&&s(this.formatLanguageCode(t)),e.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}},Vt={zero:0,one:1,two:2,few:3,many:4,other:5},Kt={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})},at=class{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=Z.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){let e=Se(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:e,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(e,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Kt;if(!t.match(/-|_/))return Kt;let l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,n)}return this.pluralRulesCache[s]=o,o}needsPlural(t,n={}){let e=this.getRule(t,n);return e||(e=this.getRule("dev",n)),e?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n,e={}){return this.getSuffixes(t,e).map(i=>`${n}${i}`)}getSuffixes(t,n={}){let e=this.getRule(t,n);return e||(e=this.getRule("dev",n)),e?e.resolvedOptions().pluralCategories.sort((i,s)=>Vt[i]-Vt[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,n,e={}){let i=this.getRule(t,e);return i?`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,e))}},Gt=(r,t,n,e=".",i=!0)=>{let s=Kn(r,t,n);return!s&&i&&T(n)&&(s=it(r,n,e),s===void 0&&(s=it(t,n,e))),s},nt=r=>r.replace(/\$/g,"$$$$"),lt=class{constructor(t={}){this.logger=Z.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});let{escape:n,escapeValue:e,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:f,unescapePrefix:c,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:O,alwaysFormat:C}=t.interpolation;this.escape=n!==void 0?n:Jn,this.escapeValue=e!==void 0?e:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?ce(s):o||"{{",this.suffix=a?ce(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=f?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=d?ce(d):h||ce("$t("),this.nestingSuffix=p?ce(p):m||ce(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=O||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=(n,e)=>n?.source===e?(n.lastIndex=0,n):new RegExp(e,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,e,i){let s,o,a,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=h=>{if(h.indexOf(this.formatSeparator)<0){let O=Gt(n,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(O,void 0,e,{...i,...n,interpolationkey:h}):O}let p=h.split(this.formatSeparator),m=p.shift().trim(),v=p.join(this.formatSeparator).trim();return this.format(Gt(n,l,m,this.options.keySeparator,this.options.ignoreJSONStructure),v,e,{...i,...n,interpolationkey:m})};this.resetRegExp();let f=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,c=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>nt(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?nt(this.escape(h)):nt(h)}].forEach(h=>{for(a=0;s=h.regex.exec(t);){let p=s[1].trim();if(o=u(p),o===void 0)if(typeof f=="function"){let v=f(t,s,i);o=T(v)?v:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))o="";else if(c){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),o="";else!T(o)&&!this.useRawValueToEscape&&(o=jt(o));let m=h.safeValue(o);if(t=t.replace(s[0],m),c?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n,e={}){let i,s,o,a=(l,u)=>{let f=this.nestingOptionsSeparator;if(l.indexOf(f)<0)return l;let c=l.split(new RegExp(`${f}[ ]*{`)),d=`{${c[1]}`;l=c[0],d=this.interpolate(d,o);let h=d.match(/'/g),p=d.match(/"/g);((h?.length??0)%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),u&&(o={...u,...o})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${f}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];o={...e},o=o.replace&&!T(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(u!==-1&&(l=i[1].slice(u).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,u)),s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===t&&!T(s))return s;T(s)||(s=jt(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),s=""),l.length&&(s=l.reduce((f,c)=>this.format(f,c,e.lng,{...e,interpolationkey:i[1].trim()}),s.trim())),t=t.replace(i[0],s),this.regexp.lastIndex=0}return t}},Zn=r=>{let t=r.toLowerCase().trim(),n={};if(r.indexOf("(")>-1){let e=r.split("(");t=e[0].toLowerCase().trim();let i=e[1].substring(0,e[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){let[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),f=a.trim();n[f]||(n[f]=u),u==="false"&&(n[f]=!1),u==="true"&&(n[f]=!0),isNaN(u)||(n[f]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},Jt=r=>{let t={};return(n,e,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});let o=e+JSON.stringify(s),a=t[o];return a||(a=r(Se(e),i),t[o]=a),a(n)}},er=r=>(t,n,e)=>r(Se(n),e)(t),ut=class{constructor(t={}){this.logger=Z.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";let e=n.cacheInBuiltFormats?Jt:er;this.formats={number:e((i,s)=>{let o=new Intl.NumberFormat(i,{...s});return a=>o.format(a)}),currency:e((i,s)=>{let o=new Intl.NumberFormat(i,{...s,style:"currency"});return a=>o.format(a)}),datetime:e((i,s)=>{let o=new Intl.DateTimeFormat(i,{...s});return a=>o.format(a)}),relativetime:e((i,s)=>{let o=new Intl.RelativeTimeFormat(i,{...s});return a=>o.format(a,s.range||"day")}),list:e((i,s)=>{let o=new Intl.ListFormat(i,{...s});return a=>o.format(a)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Jt(n)}format(t,n,e,i={}){let s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){let a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{let{formatName:u,formatOptions:f}=Zn(l);if(this.formats[u]){let c=a;try{let d=i?.formatParams?.[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||e;c=this.formats[u](a,h,{...f,...i,...d})}catch(d){this.logger.warn(d)}return c}else this.logger.warn(`there was no format function for ${u}`);return a},t)}},tr=(r,t)=>{r.pending[t]!==void 0&&(delete r.pending[t],r.pendingCount--)},ft=class extends de{constructor(t,n,e,i={}){super(),this.backend=t,this.store=n,this.services=e,this.languageUtils=e.languageUtils,this.options=i,this.logger=Z.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(e,i.backend,i)}queueLoad(t,n,e,i){let s={},o={},a={},l={};return t.forEach(u=>{let f=!0;n.forEach(c=>{let d=`${u}|${c}`;!e.reload&&this.store.hasResourceBundle(u,c)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,f=!1,o[d]===void 0&&(o[d]=!0),s[d]===void 0&&(s[d]=!0),l[c]===void 0&&(l[c]=!0)))}),f||(a[u]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,e){let i=t.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&e&&this.store.addResourceBundle(s,o,e,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&e&&(this.state[t]=0);let a={};this.queue.forEach(l=>{Vn(l.loaded,[s],o),tr(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});let f=l.loaded[u];f.length&&f.forEach(c=>{a[u][c]===void 0&&(a[u][c]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,e,i=0,s=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:e,tried:i,wait:s,callback:o});return}this.readingCalls++;let a=(u,f)=>{if(this.readingCalls--,this.waitingReads.length>0){let c=this.waitingReads.shift();this.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}if(u&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,e,i+1,s*2,o)},s);return}o(u,f)},l=this.backend[e].bind(this.backend);if(l.length===2){try{let u=l(t,n);u&&typeof u.then=="function"?u.then(f=>a(null,f)).catch(a):a(null,u)}catch(u){a(u)}return}return l(t,n,a)}prepareLoading(t,n,e={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();T(t)&&(t=this.languageUtils.toResolveHierarchy(t)),T(n)&&(n=[n]);let s=this.queueLoad(t,n,e,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,e){this.prepareLoading(t,n,{},e)}reload(t,n,e){this.prepareLoading(t,n,{reload:!0},e)}loadOne(t,n=""){let e=t.split("|"),i=e[0],s=e[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(t,o,a)})}saveMissing(t,n,e,i,s,o={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${e}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(e==null||e==="")){if(this.backend?.create){let l={...o,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let f;u.length===5?f=u(t,n,e,i,l):f=u(t,n,e,i),f&&typeof f.then=="function"?f.then(c=>a(null,c)).catch(a):a(null,f)}catch(f){a(f)}else u(t,n,e,i,a,l)}!t||!t[0]||this.store.addResource(t[0],n,e,i)}}},_t=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let t={};if(typeof r[1]=="object"&&(t=r[1]),T(r[1])&&(t.defaultValue=r[1]),T(r[2])&&(t.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){let n=r[3]||r[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Xt=r=>(T(r.ns)&&(r.ns=[r.ns]),T(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),T(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),ke=()=>{},nr=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(n=>{typeof r[n]=="function"&&(r[n]=r[n].bind(r))})},ct=class r extends de{constructor(t={},n){if(super(),this.options=Xt(t),this.services={},this.logger=Z,this.modules={external:[]},nr(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(T(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));let e=_t();this.options={...e,...this.options,...Xt(t)},this.options.interpolation={...e.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);let i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Z.init(i(this.modules.logger),this.options):Z.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=ut;let f=new Me(this.options);this.store=new De(this.options.resources,this.options);let c=this.services;c.logger=Z,c.resourceStore=this.store,c.languageUtils=f,c.pluralResolver=new at(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==e.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===e.interpolation.format)&&(c.formatter=i(u),c.formatter.init&&c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new lt(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new ft(i(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",(h,...p)=>{this.emit(h,...p)}),this.modules.languageDetector&&(c.languageDetector=i(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=i(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new $e(this.services,this.options),this.translator.on("*",(h,...p)=>{this.emit(h,...p)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ke),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...f)=>this.store[u](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...f)=>(this.store[u](...f),this)});let a=xe(),l=()=>{let u=(f,c)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(c),n(f,c)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(t,n=ke){let e=n,i=T(t)?t:this.language;if(typeof t=="function"&&(e=t),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return e();let s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload?.forEach?.(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),e(a)})}else e(null)}reloadResources(t,n,e){let i=xe();return typeof t=="function"&&(e=t,t=void 0),typeof n=="function"&&(e=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),e||(e=ke),this.services.backendConnector.reload(t,n,s=>{i.resolve(),e(s)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Yt.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){let e=this.languages[n];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;let e=xe();this.emit("languageChanging",t);let i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,l)=>{l?this.isLanguageChangingTo===t&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,e.resolve((...u)=>this.t(...u)),n&&n(a,(...u)=>this.t(...u))},o=a=>{!t&&!a&&this.services.languageDetector&&(a=[]);let l=T(a)?a:a&&a[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(T(a)?[a]:a);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,f=>{s(f,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),e}getFixedT(t,n,e){let i=(s,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([s,o].concat(a)):l={...o},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||e||i.keyPrefix);let u=this.options.keySeparator||".",f;return l.keyPrefix&&Array.isArray(s)?f=s.map(c=>(typeof c=="function"&&(c=ot(c,{...this.options,...o})),`${l.keyPrefix}${u}${c}`)):(typeof s=="function"&&(s=ot(s,{...this.options,...o})),f=l.keyPrefix?`${l.keyPrefix}${u}${s}`:s),this.t(f,l)};return T(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=e,i}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let e=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(e.toLowerCase()==="cimode")return!0;let o=(a,l)=>{let u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){let a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(e,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(e,t)&&(!i||o(s,t)))}loadNamespaces(t,n){let e=xe();return this.options.ns?(T(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{e.resolve(),n&&n(i)}),e):(n&&n(),Promise.resolve())}loadLanguages(t,n){let e=xe();T(t)&&(t=[t]);let i=this.options.preload||[],s=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{e.resolve(),n&&n(o)}),e):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{let i=new Intl.Locale(t);if(i&&i.getTextInfo){let s=i.getTextInfo();if(s&&s.direction)return s.direction}}catch{}let n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],e=this.services?.languageUtils||new Me(_t());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(e.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){let e=new r(t,n);return e.createInstance=r.createInstance,e}cloneInstance(t={},n=ke){let e=t.forkResourceStore;e&&delete t.forkResourceStore;let i={...this.options,...t,isClone:!0},s=new r(i);if((t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},e){let a=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((f,c)=>(f[c]={...l[u][c]},f),l[u]),l),{});s.store=new De(a,i),s.services.resourceStore=s.store}return s.translator=new $e(s.services,i),s.translator.on("*",(a,...l)=>{s.emit(a,...l)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},z=ct.createInstance(),to=z.createInstance,no=z.dir,ro=z.init,io=z.loadResources,so=z.reloadResources,oo=z.use,ao=z.changeLanguage,lo=z.getFixedT,uo=z.t,fo=z.exists,co=z.setDefaultNamespace,ho=z.hasLoadedNamespace,po=z.loadNamespaces,go=z.loadLanguages;var Zt={en:{common:{"app.title":"Drafter Application","icon.home":"\u{1F3E0}","button.home":"Home","button.home.tooltip":"Go to Home","icon.reset":"\u{1F504}","button.reset":"Reset","button.reset.tooltip":"Clear state, history, and return to home","icon.about":"\u2139\uFE0F","button.about":"About","button.about.tooltip":"Show the about page with application information","icon.save":"\u{1F4BE}","button.save":"Save","button.save.tooltip":"Save current state to local storage","icon.load":"\u{1F4C2}","button.load":"Load","button.load.tooltip":"Load previous state from local storage","icon.download":"\u{1F4E5}","button.download":"Download","button.download.tooltip":"Download current state as a JSON file","icon.upload":"\u{1F4E4}","button.upload":"Upload","button.upload.tooltip":"Upload a JSON file to restore state","icon.toggle":"\u2699\uFE0F","button.toggle":"Toggle","button.toggle.tooltip":"Hide the debug panel (CTRL+Q twice to show again)","icon.close":"\u274C","button.close":"Close","button.close.tooltip":"Close the server connection and this page.","footer.route":"Route: "}},es:{common:{"app.title":"Aplicaci\xF3n Drafter","icon.home":"\u{1F3E0}","icon.reset":"\u{1F504}","button.reset":"Reiniciar","button.home":"Inicio","icon.save":"\u{1F4BE}","button.save":"Guardar","icon.load":"\u{1F4C2}","button.load":"Cargar","icon.download":"\u{1F4E5}","button.download":"Descargar","icon.upload":"\u{1F4E4}","button.upload":"Subir","icon.toggle":"\u2699\uFE0F","button.toggle":"Alternar","icon.close":"\u274C","button.close":"Cerrar"}}};var en="common";z.init({lng:"en",fallbackLng:"en",debug:!1,ns:[en],defaultNS:en,resources:Zt});var k=z.t.bind(z);var Ue=Object.keys;function ir(r){return typeof r=="boolean"}function sr(r){return r&&typeof r.nodeType=="number"}function mt(r){return typeof r=="string"}function nn(r){return typeof r=="number"}function se(r){return typeof r=="object"?r!==null:Le(r)}function Le(r){return typeof r=="function"}function or(r){return!!(r&&r.isComponent)}function ar(r){return se(r)&&typeof r.length=="number"&&typeof r.nodeType!="number"}function ht(r,t){if(r)for(let n of Ue(r))t(r[n],n)}function lr(r){return se(r)&&"current"in r}var pt={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0};function ur(r,t){return r+t.charAt(0).toUpperCase()+t.substring(1)}var fr=["Webkit","ms","Moz","O"];Ue(pt).forEach(r=>{fr.forEach(t=>{pt[ur(t,r)]=0})});var cr=Symbol.for("jsx-dom:type"),rn=(function(r){return r.ShadowRoot="ShadowRoot",r})(rn||{});function dr(r){return r!=null&&r[cr]===rn.ShadowRoot}var hr="http://www.w3.org/2000/svg",pr="http://www.w3.org/1999/xlink",gr="http://www.w3.org/XML/1998/namespace";function sn(r){return!ir(r)&&r!=null}function gt(r){return Array.isArray(r)?r.map(gt).filter(Boolean).join(" "):se(r)?Symbol.iterator in r?gt(Array.from(r)):Ue(r).filter(t=>r[t]).join(" "):sn(r)?""+r:""}var mr={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0},br=/^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;function vr(r,t,n){t={...t,children:n};let e=new r(t),i=e.render();return"ref"in t&&bt(t.ref,e),i}function x(r,t){let{children:n,...e}=t;!e.namespaceURI&&mr[r]===0&&(e={...e,namespaceURI:hr});let i;if(mt(r)){if(i=e.namespaceURI?document.createElementNS(e.namespaceURI,r):document.createElement(r),wr(e,i),vt(n,i),i instanceof window.HTMLSelectElement&&e.value!=null)if(e.multiple===!0&&Array.isArray(e.value)){let s=e.value.map(o=>String(o));i.querySelectorAll("option").forEach(o=>o.selected=s.includes(o.value))}else i.value=e.value;bt(e.ref,i)}else if(Le(r))se(r.defaultProps)&&(e={...r.defaultProps,...e}),i=or(r)?vr(r,e,n):r({...e,children:n});else throw new TypeError(`Invalid JSX element type: ${r}`);return i}function bt(r,t){lr(r)?r.current=t:Le(r)&&r(t)}function vt(r,t){if(ar(r))yr(r,t);else if(mt(r)||nn(r))dt(document.createTextNode(r),t);else if(r===null)dt(document.createComment(""),t);else if(sr(r))dt(r,t);else if(dr(r)){let n=t.attachShadow(r.attr);vt(r.children,n),bt(r.ref,n)}}function yr(r,t){for(let n of[...r])vt(n,t);return t}function dt(r,t){t instanceof window.HTMLTemplateElement?t.content.appendChild(r):t.appendChild(r)}function je(r,t){return r.replace(/[A-Z]/g,n=>t+n.toLowerCase())}function on(r,t){t==null||t===!1||(Array.isArray(t)?t.forEach(n=>on(r,n)):mt(t)?r.setAttribute("style",t):se(t)&&ht(t,(n,e)=>{e.indexOf("-")===0?r.style.setProperty(e,n):nn(n)&&pt[e]!==0?r.style[e]=n+"px":r.style[e]=n}))}function xr(r,t,n){switch(r){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":tn(n,pr,je(r,":"),t);return;case"xmlnsXlink":he(n,je(r,":"),t);return;case"xmlBase":case"xmlLang":case"xmlSpace":tn(n,gr,je(r,":"),t);return}switch(r){case"htmlFor":he(n,"for",t);return;case"dataset":ht(t,(e,i)=>{e!=null&&(n.dataset[i]=e)});return;case"innerHTML":case"innerText":case"textContent":sn(t)&&(n[r]=t);return;case"dangerouslySetInnerHTML":se(t)&&(n.innerHTML=t.__html);return;case"value":if(t==null||n instanceof window.HTMLSelectElement)return;if(n instanceof window.HTMLTextAreaElement){n.value=t;return}break;case"spellCheck":n.spellcheck=t;return;case"class":case"className":Le(t)?t(n):he(n,"class",gt(t));return;case"ref":case"namespaceURI":return;case"style":on(n,t);return;case"on":case"onCapture":ht(t,(e,i)=>{n.addEventListener(i,e,r==="onCapture")});return}if(Le(t)){if(r[0]==="o"&&r[1]==="n"){let e=r.toLowerCase(),i=e.endsWith("capture");if(e==="ondoubleclick"?e="ondblclick":i&&e==="ondoubleclickcapture"&&(e="ondblclickcapture"),!i&&n[e]===null)n[e]=t;else if(i)n.addEventListener(e.substring(2,e.length-7),t,!0);else{let s;e in window?s=e.substring(2):s=e[2]+r.slice(3),n.addEventListener(s,t)}}}else se(t)?n[r]=t:t===!0?he(n,r,""):t!==!1&&t!=null&&(n instanceof SVGElement&&!br.test(r)?he(n,je(r,"-"),t):he(n,r,t))}function he(r,t,n){r.setAttribute(t,n)}function tn(r,t,n,e){r.setAttributeNS(t,n,e)}function wr(r,t){for(let n of Ue(r))xr(n,r[n],t);return t}var Be=class{headerElement;constructor(t){if(this.headerElement=document.querySelector(".drafter-header--"),!this.headerElement)throw new Error("Header element not found");let n=this.createHeaderBar();this.headerElement.appendChild(n)}createHeaderBar(){let t=x("span",{children:k("app.title")}),n=this.createHotButtons();return x("div",{className:"drafter-header-bar",children:[t,n]})}createHotButtons(){return x("div",{className:"drafter-header-hot-buttons",children:[x("button",{title:k("button.home"),class:"drafter-home-button",children:k("icon.home")}),x("button",{title:k("button.reset"),class:"drafter-reset-button",children:k("icon.reset")}),x("button",{title:k("button.about"),class:"drafter-about-button",children:k("icon.about")}),x("button",{title:k("button.save"),class:"drafter-save-button",children:k("icon.save")}),x("button",{title:k("button.load"),class:"drafter-load-button",children:k("icon.load")}),x("button",{title:k("button.download"),class:"drafter-download-button",children:k("icon.download")}),x("button",{title:k("button.toggle"),class:"drafter-toggle-button",children:k("icon.toggle")}),x("button",{title:k("button.close"),class:"drafter-close-button",children:k("icon.close")})]})}setTitle(t){this.headerElement.innerHTML=`<span>${t}</span>`}};var ze=class{footerElement;routeElement;constructor(){if(this.footerElement=document.querySelector(".drafter-footer--"),!this.footerElement)throw new Error("Footer element not found");let t=this.createFooterBar();this.footerElement.appendChild(t),this.routeElement=this.footerElement.querySelector(".drafter-footer-route")}createFooterBar(){return x("div",{className:"drafter-footer-bar",children:[x("span",{children:k("footer.route")}),x("span",{className:"drafter-footer-route"})]})}setRoute(t){this.routeElement.textContent=t}};var D;(function(r){r.INSERT="insert",r.DELETE="delete",r.CONTEXT="context"})(D||(D={}));var an={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"},ln={LINES:"lines",WORDS:"words",NONE:"none"},un={WORD:"word",CHAR:"char"},oe;(function(r){r.AUTO="auto",r.DARK="dark",r.LIGHT="light"})(oe||(oe={}));var Sr=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],Lr=RegExp("["+Sr.join("\\")+"]","g");function fn(r){return r.replace(Lr,"\\$&")}function yt(r){return r&&r.replace(/\\/g,"/")}function cn(r){let t,n,e,i=0;for(t=0,e=r.length;t<e;t++)n=r.charCodeAt(t),i=(i<<5)-i+n,i|=0;return i}function We(r){let t=r.length,n=-1/0;for(let e=0;e<t;e++)n=Math.max(n,r[e]);return n}function dn(r,t){let n=r.split(".");return n.length>1?n[n.length-1]:t}function hn(r,t){return t.reduce((n,e)=>n||r.startsWith(e),!1)}var pn=["a/","b/","i/","w/","c/","o/"];function re(r,t,n){let e=n!==void 0?[...pn,n]:pn,i=t?new RegExp(`^${fn(t)} "?(.+?)"?$`):new RegExp('^"?(.+?)"?$'),[,s=""]=i.exec(r)||[],o=e.find(l=>s.indexOf(l)===0);return(o?s.slice(o.length):s).replace(/\s+\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}(?:\.\d+)? [+-]\d{4}.*$/,"")}function Er(r,t){return re(r,"---",t)}function Cr(r,t){return re(r,"+++",t)}function gn(r,t={}){let n=[],e=null,i=null,s=null,o=null,a=null,l=null,u=null,f="--- ",c="+++ ",d="@@",h=/^old mode (\d{6})/,p=/^new mode (\d{6})/,m=/^deleted file mode (\d{6})/,v=/^new file mode (\d{6})/,O=/^copy from "?(.+)"?/,C=/^copy to "?(.+)"?/,I=/^rename from "?(.+)"?/,L=/^rename to "?(.+)"?/,R=/^similarity index (\d+)%/,W=/^dissimilarity index (\d+)%/,g=/^index ([\da-z]+)\.\.([\da-z]+)\s*(\d{6})?/,b=/^Binary files (.*) and (.*) differ/,y=/^GIT binary patch/,E=/^index ([\da-z]+),([\da-z]+)\.\.([\da-z]+)/,$=/^mode (\d{6}),(\d{6})\.\.(\d{6})/,G=/^new file mode (\d{6})/,B=/^deleted file mode (\d{6}),(\d{6})/,N=r.replace(/\\ No newline at end of file/g,"").replace(/\r\n?/g,`
`).split(`
`);function _(){i!==null&&e!==null&&(e.blocks.push(i),i=null)}function V(){e!==null&&(!e.oldName&&l!==null&&(e.oldName=l),!e.newName&&u!==null&&(e.newName=u),e.newName&&(n.push(e),e=null)),l=null,u=null}function M(){_(),V(),e={blocks:[],deletedLines:0,addedLines:0}}function H(S){_();let F;e!==null&&((F=/^@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@.*/.exec(S))?(e.isCombined=!1,s=parseInt(F[1],10),a=parseInt(F[2],10)):(F=/^@@@ -(\d+)(?:,\d+)? -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@@.*/.exec(S))?(e.isCombined=!0,s=parseInt(F[1],10),o=parseInt(F[2],10),a=parseInt(F[3],10)):(S.startsWith(d)&&console.error("Failed to parse lines, starting in 0!"),s=0,a=0,e.isCombined=!1)),i={lines:[],oldStartLine:s,oldStartLine2:o,newStartLine:a,header:S}}function X(S){if(e===null||i===null||s===null||a===null)return;let F={content:S},w=e.isCombined?["+ "," +","++"]:["+"],te=e.isCombined?["- "," -","--"]:["-"];hn(S,w)?(e.addedLines++,F.type=D.INSERT,F.oldNumber=void 0,F.newNumber=a++):hn(S,te)?(e.deletedLines++,F.type=D.DELETE,F.oldNumber=s++,F.newNumber=void 0):(F.type=D.CONTEXT,F.oldNumber=s++,F.newNumber=a++),i.lines.push(F)}function A(S,F){let w=F;for(;w<N.length-3;){if(S.startsWith("diff"))return!1;if(N[w].startsWith(f)&&N[w+1].startsWith(c)&&N[w+2].startsWith(d))return!0;w++}return!1}return N.forEach((S,F)=>{if(!S||S.startsWith("*"))return;let w,te=N[F-1],Re=N[F+1],Pe=N[F+2];if(S.startsWith("diff --git")||S.startsWith("diff --combined")){if(M(),(w=/^diff --git "?([a-ciow]\/.+)"? "?([a-ciow]\/.+)"?/.exec(S))&&(l=re(w[1],void 0,t.dstPrefix),u=re(w[2],void 0,t.srcPrefix)),e===null)throw new Error("Where is my file !!!");e.isGitDiff=!0;return}if(S.startsWith("Binary files")&&!e?.isGitDiff){if(M(),(w=/^Binary files "?([a-ciow]\/.+)"? and "?([a-ciow]\/.+)"? differ/.exec(S))&&(l=re(w[1],void 0,t.dstPrefix),u=re(w[2],void 0,t.srcPrefix)),e===null)throw new Error("Where is my file !!!");e.isBinary=!0;return}if((!e||!e.isGitDiff&&e&&S.startsWith(f)&&Re.startsWith(c)&&Pe.startsWith(d))&&M(),e?.isTooBig)return;if(e&&(typeof t.diffMaxChanges=="number"&&e.addedLines+e.deletedLines>t.diffMaxChanges||typeof t.diffMaxLineLength=="number"&&S.length>t.diffMaxLineLength)){e.isTooBig=!0,e.addedLines=0,e.deletedLines=0,e.blocks=[],i=null;let J=typeof t.diffTooBigMessage=="function"?t.diffTooBigMessage(n.length):"Diff too big to be displayed";H(J);return}if(S.startsWith(f)&&Re.startsWith(c)||S.startsWith(c)&&te.startsWith(f)){if(e&&!e.oldName&&S.startsWith("--- ")&&(w=Er(S,t.srcPrefix))){e.oldName=w,e.language=dn(e.oldName,e.language);return}if(e&&!e.newName&&S.startsWith("+++ ")&&(w=Cr(S,t.dstPrefix))){e.newName=w,e.language=dn(e.newName,e.language);return}}if(e&&(S.startsWith(d)||e.isGitDiff&&e.oldName&&e.newName&&!i)){H(S);return}if(i&&(S.startsWith("+")||S.startsWith("-")||S.startsWith(" "))){X(S);return}let ue=!A(S,F);if(e===null)throw new Error("Where is my file !!!");(w=h.exec(S))?e.oldMode=w[1]:(w=p.exec(S))?e.newMode=w[1]:(w=m.exec(S))?(e.deletedFileMode=w[1],e.isDeleted=!0):(w=v.exec(S))?(e.newFileMode=w[1],e.isNew=!0):(w=O.exec(S))?(ue&&(e.oldName=w[1]),e.isCopy=!0):(w=C.exec(S))?(ue&&(e.newName=w[1]),e.isCopy=!0):(w=I.exec(S))?(ue&&(e.oldName=w[1]),e.isRename=!0):(w=L.exec(S))?(ue&&(e.newName=w[1]),e.isRename=!0):(w=b.exec(S))?(e.isBinary=!0,e.oldName=re(w[1],void 0,t.srcPrefix),e.newName=re(w[2],void 0,t.dstPrefix),H("Binary file")):y.test(S)?(e.isBinary=!0,H(S)):(w=R.exec(S))?e.unchangedPercentage=parseInt(w[1],10):(w=W.exec(S))?e.changedPercentage=parseInt(w[1],10):(w=g.exec(S))?(e.checksumBefore=w[1],e.checksumAfter=w[2],w[3]&&(e.mode=w[3])):(w=E.exec(S))?(e.checksumBefore=[w[2],w[3]],e.checksumAfter=w[1]):(w=$.exec(S))?(e.oldMode=[w[2],w[3]],e.newMode=w[1]):(w=G.exec(S))?(e.newFileMode=w[1],e.isNew=!0):(w=B.exec(S))&&(e.deletedFileMode=w[1],e.isDeleted=!0)}),_(),V(),n}function Y(){}Y.prototype={diff:function(t,n){var e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={});var o=this;function a(L){return L=o.postProcess(L,i),s?(setTimeout(function(){s(L)},0),!0):L}t=this.castInput(t,i),n=this.castInput(n,i),t=this.removeEmpty(this.tokenize(t,i)),n=this.removeEmpty(this.tokenize(n,i));var l=n.length,u=t.length,f=1,c=l+u;i.maxEditLength!=null&&(c=Math.min(c,i.maxEditLength));var d=(e=i.timeout)!==null&&e!==void 0?e:1/0,h=Date.now()+d,p=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(p[0],n,t,0,i);if(p[0].oldPos+1>=u&&m+1>=l)return a(mn(o,p[0].lastComponent,n,t,o.useLongestToken));var v=-1/0,O=1/0;function C(){for(var L=Math.max(v,-f);L<=Math.min(O,f);L+=2){var R=void 0,W=p[L-1],g=p[L+1];W&&(p[L-1]=void 0);var b=!1;if(g){var y=g.oldPos-L;b=g&&0<=y&&y<l}var E=W&&W.oldPos+1<u;if(!b&&!E){p[L]=void 0;continue}if(!E||b&&W.oldPos<g.oldPos?R=o.addToPath(g,!0,!1,0,i):R=o.addToPath(W,!1,!0,1,i),m=o.extractCommon(R,n,t,L,i),R.oldPos+1>=u&&m+1>=l)return a(mn(o,R.lastComponent,n,t,o.useLongestToken));p[L]=R,R.oldPos+1>=u&&(O=Math.min(O,L-1)),m+1>=l&&(v=Math.max(v,L+1))}f++}if(s)(function L(){setTimeout(function(){if(f>c||Date.now()>h)return s();C()||L()},0)})();else for(;f<=c&&Date.now()<=h;){var I=C();if(I)return I}},addToPath:function(t,n,e,i,s){var o=t.lastComponent;return o&&!s.oneChangePerToken&&o.added===n&&o.removed===e?{oldPos:t.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:e,previousComponent:o.previousComponent}}:{oldPos:t.oldPos+i,lastComponent:{count:1,added:n,removed:e,previousComponent:o}}},extractCommon:function(t,n,e,i,s){for(var o=n.length,a=e.length,l=t.oldPos,u=l-i,f=0;u+1<o&&l+1<a&&this.equals(e[l+1],n[u+1],s);)u++,l++,f++,s.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return f&&!s.oneChangePerToken&&(t.lastComponent={count:f,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=l,u},equals:function(t,n,e){return e.comparator?e.comparator(t,n):t===n||e.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],e=0;e<t.length;e++)t[e]&&n.push(t[e]);return n},castInput:function(t){return t},tokenize:function(t){return Array.from(t)},join:function(t){return t.join("")},postProcess:function(t){return t}};function mn(r,t,n,e,i){for(var s=[],o;t;)s.push(t),o=t.previousComponent,delete t.previousComponent,t=o;s.reverse();for(var a=0,l=s.length,u=0,f=0;a<l;a++){var c=s[a];if(c.removed)c.value=r.join(e.slice(f,f+c.count)),f+=c.count;else{if(!c.added&&i){var d=n.slice(u,u+c.count);d=d.map(function(h,p){var m=e[f+p];return m.length>h.length?m:h}),c.value=r.join(d)}else c.value=r.join(n.slice(u,u+c.count));u+=c.count,c.added||(f+=c.count)}}return s}var Nr=new Y;function wn(r,t,n){return Nr.diff(r,t,n)}function bn(r,t){var n;for(n=0;n<r.length&&n<t.length;n++)if(r[n]!=t[n])return r.slice(0,n);return r.slice(0,n)}function vn(r,t){var n;if(!r||!t||r[r.length-1]!=t[t.length-1])return"";for(n=0;n<r.length&&n<t.length;n++)if(r[r.length-(n+1)]!=t[t.length-(n+1)])return r.slice(-n);return r.slice(-n)}function xt(r,t,n){if(r.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return n+r.slice(t.length)}function wt(r,t,n){if(!t)return r+n;if(r.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return r.slice(0,-t.length)+n}function Ee(r,t){return xt(r,t,"")}function Ve(r,t){return wt(r,t,"")}function yn(r,t){return t.slice(0,Or(r,t))}function Or(r,t){var n=0;r.length>t.length&&(n=r.length-t.length);var e=t.length;r.length<t.length&&(e=r.length);var i=Array(e),s=0;i[0]=0;for(var o=1;o<e;o++){for(t[o]==t[s]?i[o]=i[s]:i[o]=s;s>0&&t[o]!=t[s];)s=i[s];t[o]==t[s]&&s++}s=0;for(var a=n;a<r.length;a++){for(;s>0&&r[a]!=t[s];)s=i[s];r[a]==t[s]&&s++}return s}var Ke="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Fr=new RegExp("[".concat(Ke,"]+|\\s+|[^").concat(Ke,"]"),"ug"),Ge=new Y;Ge.equals=function(r,t,n){return n.ignoreCase&&(r=r.toLowerCase(),t=t.toLowerCase()),r.trim()===t.trim()};Ge.tokenize=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(t.intlSegmenter.segment(r),function(s){return s.segment})}else n=r.match(Fr)||[];var e=[],i=null;return n.forEach(function(s){/\s/.test(s)?i==null?e.push(s):e.push(e.pop()+s):/\s/.test(i)?e[e.length-1]==i?e.push(e.pop()+s):e.push(i+s):e.push(s),i=s}),e};Ge.join=function(r){return r.map(function(t,n){return n==0?t:t.replace(/^\s+/,"")}).join("")};Ge.postProcess=function(r,t){if(!r||t.oneChangePerToken)return r;var n=null,e=null,i=null;return r.forEach(function(s){s.added?e=s:s.removed?i=s:((e||i)&&xn(n,i,e,s),n=s,e=null,i=null)}),(e||i)&&xn(n,i,e,null),r};function xn(r,t,n,e){if(t&&n){var i=t.value.match(/^\s*/)[0],s=t.value.match(/\s*$/)[0],o=n.value.match(/^\s*/)[0],a=n.value.match(/\s*$/)[0];if(r){var l=bn(i,o);r.value=wt(r.value,o,l),t.value=Ee(t.value,l),n.value=Ee(n.value,l)}if(e){var u=vn(s,a);e.value=xt(e.value,a,u),t.value=Ve(t.value,u),n.value=Ve(n.value,u)}}else if(n)r&&(n.value=n.value.replace(/^\s*/,"")),e&&(e.value=e.value.replace(/^\s*/,""));else if(r&&e){var f=e.value.match(/^\s*/)[0],c=t.value.match(/^\s*/)[0],d=t.value.match(/\s*$/)[0],h=bn(f,c);t.value=Ee(t.value,h);var p=vn(Ee(f,h),d);t.value=Ve(t.value,p),e.value=xt(e.value,f,p),r.value=wt(r.value,f,f.slice(0,f.length-p.length))}else if(e){var m=e.value.match(/^\s*/)[0],v=t.value.match(/\s*$/)[0],O=yn(v,m);t.value=Ve(t.value,O)}else if(r){var C=r.value.match(/\s*$/)[0],I=t.value.match(/^\s*/)[0],L=yn(C,I);t.value=Ee(t.value,L)}}var Sn=new Y;Sn.tokenize=function(r){var t=new RegExp("(\\r?\\n)|[".concat(Ke,"]+|[^\\S\\n\\r]+|[^").concat(Ke,"]"),"ug");return r.match(t)||[]};function Ln(r,t,n){return Sn.diff(r,t,n)}var Ct=new Y;Ct.tokenize=function(r,t){t.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var n=[],e=r.split(/(\n|\r\n)/);e[e.length-1]||e.pop();for(var i=0;i<e.length;i++){var s=e[i];i%2&&!t.newlineIsToken?n[n.length-1]+=s:n.push(s)}return n};Ct.equals=function(r,t,n){return n.ignoreWhitespace?((!n.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),Y.prototype.equals.call(this,r,t,n)};var Ir=new Y;Ir.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var Rr=new Y;Rr.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function St(r){"@babel/helpers - typeof";return St=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(r)}var Ce=new Y;Ce.useLongestToken=!0;Ce.tokenize=Ct.tokenize;Ce.castInput=function(r,t){var n=t.undefinedReplacement,e=t.stringifyReplacer,i=e===void 0?function(s,o){return typeof o>"u"?n:o}:e;return typeof r=="string"?r:JSON.stringify(Lt(r,null,null,i),i,"  ")};Ce.equals=function(r,t,n){return Y.prototype.equals.call(Ce,r.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),n)};function Lt(r,t,n,e,i){t=t||[],n=n||[],e&&(r=e(i,r));var s;for(s=0;s<t.length;s+=1)if(t[s]===r)return n[s];var o;if(Object.prototype.toString.call(r)==="[object Array]"){for(t.push(r),o=new Array(r.length),n.push(o),s=0;s<r.length;s+=1)o[s]=Lt(r[s],t,n,e,i);return t.pop(),n.pop(),o}if(r&&r.toJSON&&(r=r.toJSON()),St(r)==="object"&&r!==null){t.push(r),o={},n.push(o);var a=[],l;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=Lt(r[l],t,n,e,l);t.pop(),n.pop()}else o=r;return o}var Et=new Y;Et.tokenize=function(r){return r.slice()};Et.join=Et.removeEmpty=function(r){return r};function Hr(r,t){if(r.length===0)return t.length;if(t.length===0)return r.length;let n=[],e;for(e=0;e<=t.length;e++)n[e]=[e];let i;for(i=0;i<=r.length;i++)n[0][i]=i;for(e=1;e<=t.length;e++)for(i=1;i<=r.length;i++)t.charAt(e-1)===r.charAt(i-1)?n[e][i]=n[e-1][i-1]:n[e][i]=Math.min(n[e-1][i-1]+1,Math.min(n[e][i-1]+1,n[e-1][i]+1));return n[t.length][r.length]}function pe(r){return(t,n)=>{let e=r(t).trim(),i=r(n).trim();return Hr(e,i)/(e.length+i.length)}}function ge(r){function t(e,i,s=new Map){let o=1/0,a;for(let l=0;l<e.length;++l)for(let u=0;u<i.length;++u){let f=JSON.stringify([e[l],i[u]]),c;s.has(f)&&(c=s.get(f))||(c=r(e[l],i[u]),s.set(f,c)),c<o&&(o=c,a={indexA:l,indexB:u,score:o})}return a}function n(e,i,s=0,o=new Map){let a=t(e,i,o);if(!a||e.length+i.length<3)return[[e,i]];let l=e.slice(0,a.indexA),u=i.slice(0,a.indexB),f=[e[a.indexA]],c=[i[a.indexB]],d=a.indexA+1,h=a.indexB+1,p=e.slice(d),m=i.slice(h),v=n(l,u,s+1,o),O=n(f,c,s+1,o),C=n(p,m,s+1,o),I=O;return(a.indexA>0||a.indexB>0)&&(I=v.concat(I)),(e.length>d||i.length>h)&&(I=I.concat(C)),I}return n}var K={INSERTS:"d2h-ins",DELETES:"d2h-del",CONTEXT:"d2h-cntx",INFO:"d2h-info",INSERT_CHANGES:"d2h-ins d2h-change",DELETE_CHANGES:"d2h-del d2h-change"},ae={matching:ln.NONE,matchWordsThreshold:.25,maxLineLengthHighlight:1e4,diffStyle:un.WORD,colorScheme:oe.LIGHT},ee="/",En=pe(r=>r.value),kr=ge(En);function Nt(r){return r.indexOf("dev/null")!==-1}function Ar(r){return r.replace(/(<ins[^>]*>((.|\n)*?)<\/ins>)/g,"")}function Dr(r){return r.replace(/(<del[^>]*>((.|\n)*?)<\/del>)/g,"")}function me(r){switch(r){case D.CONTEXT:return K.CONTEXT;case D.INSERT:return K.INSERTS;case D.DELETE:return K.DELETES}}function be(r){switch(r){case oe.DARK:return"d2h-dark-color-scheme";case oe.AUTO:return"d2h-auto-color-scheme";case oe.LIGHT:default:return"d2h-light-color-scheme"}}function $r(r){return r?2:1}function ie(r){return r.slice(0).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function q(r,t,n=!0){let e=$r(t);return{prefix:r.substring(0,e),content:n?ie(r.substring(e)):r.substring(e)}}function le(r){let t=yt(r.oldName),n=yt(r.newName);if(t!==n&&!Nt(t)&&!Nt(n)){let e=[],i=[],s=t.split(ee),o=n.split(ee),a=s.length,l=o.length,u=0,f=a-1,c=l-1;for(;u<f&&u<c&&s[u]===o[u];)e.push(o[u]),u+=1;for(;f>u&&c>u&&s[f]===o[c];)i.unshift(o[c]),f-=1,c-=1;let d=e.join(ee),h=i.join(ee),p=s.slice(u,f+1).join(ee),m=o.slice(u,c+1).join(ee);return d.length&&h.length?d+ee+"{"+p+" \u2192 "+m+"}"+ee+h:d.length?d+ee+"{"+p+" \u2192 "+m+"}":h.length?"{"+p+" \u2192 "+m+"}"+ee+h:t+" \u2192 "+n}else return Nt(n)?t:n}function ve(r){return`d2h-${cn(le(r)).toString().slice(-6)}`}function ye(r){let t="file-changed";return r.isRename||r.isCopy?t="file-renamed":r.isNew?t="file-added":r.isDeleted?t="file-deleted":r.newName!==r.oldName&&(t="file-renamed"),t}function Je(r,t,n,e={}){let{matching:i,maxLineLengthHighlight:s,matchWordsThreshold:o,diffStyle:a}=Object.assign(Object.assign({},ae),e),l=q(r,n,!1),u=q(t,n,!1);if(l.content.length>s||u.content.length>s)return{oldLine:{prefix:l.prefix,content:ie(l.content)},newLine:{prefix:u.prefix,content:ie(u.content)}};let f=a==="char"?wn(l.content,u.content):Ln(l.content,u.content),c=[];if(a==="word"&&i==="words"){let h=f.filter(v=>v.removed),p=f.filter(v=>v.added);kr(p,h).forEach(v=>{v[0].length===1&&v[1].length===1&&En(v[0][0],v[1][0])<o&&(c.push(v[0][0]),c.push(v[1][0]))})}let d=f.reduce((h,p)=>{let m=p.added?"ins":p.removed?"del":null,v=c.indexOf(p)>-1?' class="d2h-change"':"",O=ie(p.value);return m!==null?`${h}<${m}${v}>${O}</${m}>`:`${h}${O}`},"");return{oldLine:{prefix:l.prefix,content:Ar(d)},newLine:{prefix:u.prefix,content:Dr(d)}}}var Cn="file-summary",Mr="icon",jr={colorScheme:ae.colorScheme},_e=class{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},jr),n)}render(t){let n=t.map(e=>this.hoganUtils.render(Cn,"line",{fileHtmlId:ve(e),oldName:e.oldName,newName:e.newName,fileName:le(e),deletedLines:"-"+e.deletedLines,addedLines:"+"+e.addedLines},{fileIcon:this.hoganUtils.template(Mr,ye(e))})).join(`
`);return this.hoganUtils.render(Cn,"wrapper",{colorScheme:be(this.config.colorScheme),filesNumber:t.length,files:n})}};var Ft=Object.assign(Object.assign({},ae),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),Te="generic",Tn="line-by-line",Ur="icon",Br="tag",Ne=class{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},Ft),n)}render(t){let n=t.map(e=>{let i;return e.blocks.length?i=this.generateFileHtml(e):i=this.generateEmptyDiff(),this.makeFileDiffHtml(e,i)}).join(`
`);return this.hoganUtils.render(Te,"wrapper",{colorScheme:be(this.config.colorScheme),content:n})}makeFileDiffHtml(t,n){if(this.config.renderNothingWhenEmpty&&Array.isArray(t.blocks)&&t.blocks.length===0)return"";let e=this.hoganUtils.template(Tn,"file-diff"),i=this.hoganUtils.template(Te,"file-path"),s=this.hoganUtils.template(Ur,"file"),o=this.hoganUtils.template(Br,ye(t));return e.render({file:t,fileHtmlId:ve(t),diffs:n,filePath:i.render({fileDiffName:le(t)},{fileIcon:s,fileTag:o})})}generateEmptyDiff(){return this.hoganUtils.render(Te,"empty-diff",{contentClass:"d2h-code-line",CSSLineClass:K})}generateFileHtml(t){let n=ge(pe(e=>q(e.content,t.isCombined).content));return t.blocks.map(e=>{let i=this.hoganUtils.render(Te,"block-header",{CSSLineClass:K,blockHeader:t.isTooBig?e.header:ie(e.header),lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line"});return this.applyLineGroupping(e).forEach(([s,o,a])=>{if(o.length&&a.length&&!s.length)this.applyRematchMatching(o,a,n).map(([l,u])=>{let{left:f,right:c}=this.processChangedLines(t,t.isCombined,l,u);i+=f,i+=c});else if(s.length)s.forEach(l=>{let{prefix:u,content:f}=q(l.content,t.isCombined);i+=this.generateSingleLineHtml(t,{type:K.CONTEXT,prefix:u,content:f,oldNumber:l.oldNumber,newNumber:l.newNumber})});else if(o.length||a.length){let{left:l,right:u}=this.processChangedLines(t,t.isCombined,o,a);i+=l,i+=u}else console.error("Unknown state reached while processing groups of lines",s,o,a)}),i}).join(`
`)}applyLineGroupping(t){let n=[],e=[],i=[];for(let s=0;s<t.lines.length;s++){let o=t.lines[s];(o.type!==D.INSERT&&i.length||o.type===D.CONTEXT&&e.length>0)&&(n.push([[],e,i]),e=[],i=[]),o.type===D.CONTEXT?n.push([[o],[],[]]):o.type===D.INSERT&&e.length===0?n.push([[],[],[o]]):o.type===D.INSERT&&e.length>0?i.push(o):o.type===D.DELETE&&e.push(o)}return(e.length||i.length)&&(n.push([[],e,i]),e=[],i=[]),n}applyRematchMatching(t,n,e){let i=t.length*n.length,s=We(t.concat(n).map(a=>a.content.length));return i<this.config.matchingMaxComparisons&&s<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?e(t,n):[[t,n]]}processChangedLines(t,n,e,i){let s={right:"",left:""},o=Math.max(e.length,i.length);for(let a=0;a<o;a++){let l=e[a],u=i[a],f=l!==void 0&&u!==void 0?Je(l.content,u.content,n,this.config):void 0,c=l!==void 0&&l.oldNumber!==void 0?Object.assign(Object.assign({},f!==void 0?{prefix:f.oldLine.prefix,content:f.oldLine.content,type:K.DELETE_CHANGES}:Object.assign(Object.assign({},q(l.content,n)),{type:me(l.type)})),{oldNumber:l.oldNumber,newNumber:l.newNumber}):void 0,d=u!==void 0&&u.newNumber!==void 0?Object.assign(Object.assign({},f!==void 0?{prefix:f.newLine.prefix,content:f.newLine.content,type:K.INSERT_CHANGES}:Object.assign(Object.assign({},q(u.content,n)),{type:me(u.type)})),{oldNumber:u.oldNumber,newNumber:u.newNumber}):void 0,{left:h,right:p}=this.generateLineHtml(t,c,d);s.left+=h,s.right+=p}return s}generateLineHtml(t,n,e){return{left:this.generateSingleLineHtml(t,n),right:this.generateSingleLineHtml(t,e)}}generateSingleLineHtml(t,n){if(n===void 0)return"";let e=this.hoganUtils.render(Tn,"numbers",{oldNumber:n.oldNumber||"",newNumber:n.newNumber||""});return this.hoganUtils.render(Te,"line",{type:n.type,lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line",prefix:n.prefix===" "?"&nbsp;":n.prefix,content:n.content,lineNumber:e,line:n,file:t})}};var It=Object.assign(Object.assign({},ae),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),Oe="generic",zr="side-by-side",Wr="icon",Vr="tag",Fe=class{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},It),n)}render(t){let n=t.map(e=>{let i;return e.blocks.length?i=this.generateFileHtml(e):i=this.generateEmptyDiff(),this.makeFileDiffHtml(e,i)}).join(`
`);return this.hoganUtils.render(Oe,"wrapper",{colorScheme:be(this.config.colorScheme),content:n})}makeFileDiffHtml(t,n){if(this.config.renderNothingWhenEmpty&&Array.isArray(t.blocks)&&t.blocks.length===0)return"";let e=this.hoganUtils.template(zr,"file-diff"),i=this.hoganUtils.template(Oe,"file-path"),s=this.hoganUtils.template(Wr,"file"),o=this.hoganUtils.template(Vr,ye(t));return e.render({file:t,fileHtmlId:ve(t),diffs:n,filePath:i.render({fileDiffName:le(t)},{fileIcon:s,fileTag:o})})}generateEmptyDiff(){return{right:"",left:this.hoganUtils.render(Oe,"empty-diff",{contentClass:"d2h-code-side-line",CSSLineClass:K})}}generateFileHtml(t){let n=ge(pe(e=>q(e.content,t.isCombined).content));return t.blocks.map(e=>{let i={left:this.makeHeaderHtml(e.header,t),right:this.makeHeaderHtml("")};return this.applyLineGroupping(e).forEach(([s,o,a])=>{if(o.length&&a.length&&!s.length)this.applyRematchMatching(o,a,n).map(([l,u])=>{let{left:f,right:c}=this.processChangedLines(t.isCombined,l,u);i.left+=f,i.right+=c});else if(s.length)s.forEach(l=>{let{prefix:u,content:f}=q(l.content,t.isCombined),{left:c,right:d}=this.generateLineHtml({type:K.CONTEXT,prefix:u,content:f,number:l.oldNumber},{type:K.CONTEXT,prefix:u,content:f,number:l.newNumber});i.left+=c,i.right+=d});else if(o.length||a.length){let{left:l,right:u}=this.processChangedLines(t.isCombined,o,a);i.left+=l,i.right+=u}else console.error("Unknown state reached while processing groups of lines",s,o,a)}),i}).reduce((e,i)=>({left:e.left+i.left,right:e.right+i.right}),{left:"",right:""})}applyLineGroupping(t){let n=[],e=[],i=[];for(let s=0;s<t.lines.length;s++){let o=t.lines[s];(o.type!==D.INSERT&&i.length||o.type===D.CONTEXT&&e.length>0)&&(n.push([[],e,i]),e=[],i=[]),o.type===D.CONTEXT?n.push([[o],[],[]]):o.type===D.INSERT&&e.length===0?n.push([[],[],[o]]):o.type===D.INSERT&&e.length>0?i.push(o):o.type===D.DELETE&&e.push(o)}return(e.length||i.length)&&(n.push([[],e,i]),e=[],i=[]),n}applyRematchMatching(t,n,e){let i=t.length*n.length,s=We(t.concat(n).map(a=>a.content.length));return i<this.config.matchingMaxComparisons&&s<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?e(t,n):[[t,n]]}makeHeaderHtml(t,n){return this.hoganUtils.render(Oe,"block-header",{CSSLineClass:K,blockHeader:n?.isTooBig?t:ie(t),lineClass:"d2h-code-side-linenumber",contentClass:"d2h-code-side-line"})}processChangedLines(t,n,e){let i={right:"",left:""},s=Math.max(n.length,e.length);for(let o=0;o<s;o++){let a=n[o],l=e[o],u=a!==void 0&&l!==void 0?Je(a.content,l.content,t,this.config):void 0,f=a!==void 0&&a.oldNumber!==void 0?Object.assign(Object.assign({},u!==void 0?{prefix:u.oldLine.prefix,content:u.oldLine.content,type:K.DELETE_CHANGES}:Object.assign(Object.assign({},q(a.content,t)),{type:me(a.type)})),{number:a.oldNumber}):void 0,c=l!==void 0&&l.newNumber!==void 0?Object.assign(Object.assign({},u!==void 0?{prefix:u.newLine.prefix,content:u.newLine.content,type:K.INSERT_CHANGES}:Object.assign(Object.assign({},q(l.content,t)),{type:me(l.type)})),{number:l.newNumber}):void 0,{left:d,right:h}=this.generateLineHtml(f,c);i.left+=d,i.right+=h}return i}generateLineHtml(t,n){return{left:this.generateSingleHtml(t),right:this.generateSingleHtml(n)}}generateSingleHtml(t){let n="d2h-code-side-linenumber",e="d2h-code-side-line";return this.hoganUtils.render(Oe,"line",{type:t?.type||`${K.CONTEXT} d2h-emptyplaceholder`,lineClass:t!==void 0?n:`${n} d2h-code-side-emptyplaceholder`,contentClass:t!==void 0?e:`${e} d2h-code-side-emptyplaceholder`,prefix:t?.prefix===" "?"&nbsp;":t?.prefix,content:t?.content,lineNumber:t?.number})}};var kt=Mt(Ht());var U=Mt(Ht()),j={};j["file-summary-line"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<li class="d2h-file-list-line">'),e.b(`
`+n),e.b('    <span class="d2h-file-name-wrapper">'),e.b(`
`+n),e.b(e.rp("<fileIcon0",r,t,"      ")),e.b('      <a href="#'),e.b(e.v(e.f("fileHtmlId",r,t,0))),e.b('" class="d2h-file-name">'),e.b(e.v(e.f("fileName",r,t,0))),e.b("</a>"),e.b(`
`+n),e.b('      <span class="d2h-file-stats">'),e.b(`
`+n),e.b('          <span class="d2h-lines-added">'),e.b(e.v(e.f("addedLines",r,t,0))),e.b("</span>"),e.b(`
`+n),e.b('          <span class="d2h-lines-deleted">'),e.b(e.v(e.f("deletedLines",r,t,0))),e.b("</span>"),e.b(`
`+n),e.b("      </span>"),e.b(`
`+n),e.b("    </span>"),e.b(`
`+n),e.b("</li>"),e.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}}},subs:{}});j["file-summary-wrapper"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div class="d2h-file-list-wrapper '),e.b(e.v(e.f("colorScheme",r,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-list-header">'),e.b(`
`+n),e.b('        <span class="d2h-file-list-title">Files changed ('),e.b(e.v(e.f("filesNumber",r,t,0))),e.b(")</span>"),e.b(`
`+n),e.b('        <a class="d2h-file-switch d2h-hide">hide</a>'),e.b(`
`+n),e.b('        <a class="d2h-file-switch d2h-show">show</a>'),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <ol class="d2h-file-list">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("files",r,t,0))),e.b(`
`+n),e.b("    </ol>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});j["generic-block-header"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("lineClass",r,t,0))),e.b(" "),e.b(e.v(e.d("CSSLineClass.INFO",r,t,0))),e.b('"></td>'),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.d("CSSLineClass.INFO",r,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",r,t,0))),e.b('">'),e.s(e.f("blockHeader",r,t,1),r,t,0,156,173,"{{ }}")&&(e.rs(r,t,function(i,s,o){o.b(o.t(o.f("blockHeader",i,s,0)))}),r.pop()),e.s(e.f("blockHeader",r,t,1),r,t,1,0,0,"")||e.b("&nbsp;"),e.b("</div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});j["generic-empty-diff"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.d("CSSLineClass.INFO",r,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",r,t,0))),e.b('">'),e.b(`
`+n),e.b("            File without changes"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});j["generic-file-path"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-file-name-wrapper">'),e.b(`
`+n),e.b(e.rp("<fileIcon0",r,t,"    ")),e.b('    <span class="d2h-file-name">'),e.b(e.v(e.f("fileDiffName",r,t,0))),e.b("</span>"),e.b(`
`+n),e.b(e.rp("<fileTag1",r,t,"    ")),e.b("</span>"),e.b(`
`+n),e.b('<label class="d2h-file-collapse">'),e.b(`
`+n),e.b('    <input class="d2h-file-collapse-input" type="checkbox" name="viewed" value="viewed">'),e.b(`
`+n),e.b("    Viewed"),e.b(`
`+n),e.b("</label>"),e.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}},"<fileTag1":{name:"fileTag",partials:{},subs:{}}},subs:{}});j["generic-line"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("lineClass",r,t,0))),e.b(" "),e.b(e.v(e.f("type",r,t,0))),e.b('">'),e.b(`
`+n),e.b("      "),e.b(e.t(e.f("lineNumber",r,t,0))),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("type",r,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",r,t,0))),e.b('">'),e.b(`
`+n),e.s(e.f("prefix",r,t,1),r,t,0,162,238,"{{ }}")&&(e.rs(r,t,function(i,s,o){o.b('            <span class="d2h-code-line-prefix">'),o.b(o.t(o.f("prefix",i,s,0))),o.b("</span>"),o.b(`
`+n)}),r.pop()),e.s(e.f("prefix",r,t,1),r,t,1,0,0,"")||(e.b('            <span class="d2h-code-line-prefix">&nbsp;</span>'),e.b(`
`+n)),e.s(e.f("content",r,t,1),r,t,0,371,445,"{{ }}")&&(e.rs(r,t,function(i,s,o){o.b('            <span class="d2h-code-line-ctn">'),o.b(o.t(o.f("content",i,s,0))),o.b("</span>"),o.b(`
`+n)}),r.pop()),e.s(e.f("content",r,t,1),r,t,1,0,0,"")||(e.b('            <span class="d2h-code-line-ctn"><br></span>'),e.b(`
`+n)),e.b("        </div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});j["generic-wrapper"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div class="d2h-wrapper '),e.b(e.v(e.f("colorScheme",r,t,0))),e.b('">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("content",r,t,0))),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});j["icon-file-added"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-added" height="16" title="added" version="1.1" viewBox="0 0 14 16"'),e.b(`
`+n),e.b('     width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});j["icon-file-changed"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});j["icon-file-deleted"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-deleted" height="16" title="removed" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM11 9H3V7h8v2z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});j["icon-file-renamed"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-moved" height="16" title="renamed" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M6 9H3V7h3V4l5 4-5 4V9z m8-7v12c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h12c0.55 0 1 0.45 1 1z m-1 0H1v12h12V2z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});j["icon-file"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">'),e.b(`
`+n),e.b('    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});j["line-by-line-file-diff"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div id="'),e.b(e.v(e.f("fileHtmlId",r,t,0))),e.b('" class="d2h-file-wrapper" data-lang="'),e.b(e.v(e.d("file.language",r,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-header">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("filePath",r,t,0))),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <div class="d2h-file-diff">'),e.b(`
`+n),e.b('        <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('            <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                "),e.b(e.t(e.f("diffs",r,t,0))),e.b(`
`+n),e.b("                </tbody>"),e.b(`
`+n),e.b("            </table>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});j["line-by-line-numbers"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div class="line-num1">'),e.b(e.v(e.f("oldNumber",r,t,0))),e.b("</div>"),e.b(`
`+n),e.b('<div class="line-num2">'),e.b(e.v(e.f("newNumber",r,t,0))),e.b("</div>"),e.fl()},partials:{},subs:{}});j["side-by-side-file-diff"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div id="'),e.b(e.v(e.f("fileHtmlId",r,t,0))),e.b('" class="d2h-file-wrapper" data-lang="'),e.b(e.v(e.d("file.language",r,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-header">'),e.b(`
`+n),e.b("      "),e.b(e.t(e.f("filePath",r,t,0))),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <div class="d2h-files-diff">'),e.b(`
`+n),e.b('        <div class="d2h-file-side-diff">'),e.b(`
`+n),e.b('            <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('                <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                    <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                    "),e.b(e.t(e.d("diffs.left",r,t,0))),e.b(`
`+n),e.b("                    </tbody>"),e.b(`
`+n),e.b("                </table>"),e.b(`
`+n),e.b("            </div>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b('        <div class="d2h-file-side-diff">'),e.b(`
`+n),e.b('            <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('                <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                    <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                    "),e.b(e.t(e.d("diffs.right",r,t,0))),e.b(`
`+n),e.b("                    </tbody>"),e.b(`
`+n),e.b("                </table>"),e.b(`
`+n),e.b("            </div>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});j["tag-file-added"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-added d2h-added-tag">ADDED</span>'),e.fl()},partials:{},subs:{}});j["tag-file-changed"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span>'),e.fl()},partials:{},subs:{}});j["tag-file-deleted"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-deleted d2h-deleted-tag">DELETED</span>'),e.fl()},partials:{},subs:{}});j["tag-file-renamed"]=new U.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-moved d2h-moved-tag">RENAMED</span>'),e.fl()},partials:{},subs:{}});var Ie=class{constructor({compiledTemplates:t={},rawTemplates:n={}}){let e=Object.entries(n).reduce((i,[s,o])=>{let a=kt.compile(o,{asString:!1});return Object.assign(Object.assign({},i),{[s]:a})},{});this.preCompiledTemplates=Object.assign(Object.assign(Object.assign({},j),t),e)}static compile(t){return kt.compile(t,{asString:!1})}render(t,n,e,i,s){let o=this.templateKey(t,n);try{return this.preCompiledTemplates[o].render(e,i,s)}catch{throw new Error(`Could not find template to render '${o}'`)}}template(t,n){return this.preCompiledTemplates[this.templateKey(t,n)]}templateKey(t,n){return`${t}-${n}`}};var Gr=Object.assign(Object.assign(Object.assign({},Ft),It),{outputFormat:an.LINE_BY_LINE,drawFileList:!0});function In(r,t={}){let n=Object.assign(Object.assign({},Gr),t),e=typeof r=="string"?gn(r,n):r,i=new Ie(n),{colorScheme:s}=n,o={colorScheme:s},a=n.drawFileList?new _e(i,o).render(e):"",l=n.outputFormat==="side-by-side"?new Fe(i,n).render(e):new Ne(i,n).render(e);return a+l}var qe=class{tests=[];renderTest(t){this.tests.push(t);let n=document.getElementById("drafter-debug-current-tests-content-list");if(!n)throw new Error("DebugPanel: Tests section not found.");let e=t.passed?"\u2705":"\u274C",i=t.passed?"test-passed":"test-failed",s=x("div",{class:`test-case ${i}`,children:[x("div",{class:"test-case-header",children:[x("span",{class:"test-status",children:e}),x("span",{class:"test-line",children:["Line ",t.line]}),x("code",{class:"test-caller",children:t.caller})]}),x("div",{class:"test-case-diff"})]});n.appendChild(s),this.addDiffToTestElement(t,s)}addDiffToTestElement(t,n){if(!t.passed){let e=t.diff_html;console.log(e);let i=n.querySelector(".test-case-diff");if(i)i.innerHTML=In(e,{drawFileList:!1,matching:"words",diffStyle:"char",outputFormat:"side-by-side"});else throw new Error("DebugPanel: Diff container not found.")}}updateTestSummary(){let t=document.getElementById("drafter-debug-current-tests-summary");if(!t)throw new Error("DebugPanel: Test summary section not found.");let n=this.tests.length,e=this.tests.filter(s=>s.passed).length,i=n-e;t.replaceChildren(x("div",{class:"test-summary",children:[x("strong",{children:"Summary:"}),x("div",{children:["Total Tests: ",n]}),x("div",{children:["\u2705 Passed: ",e]}),x("div",{children:["\u274C Failed: ",i]})]}))}};var Ye=class{constructor(t,n){this.containerId=t;this.clientBridge=n;this.initialize()}panelElement=null;contentElement=null;events=[];pageHistory=[];currentState=null;errors=[];warnings=[];isVisible=!0;headerBar=null;footerBar=null;testingPanel=null;initialize(){let t=document.getElementById(this.containerId);if(!t){console.error(`DebugPanel: Container with id '${this.containerId}' not found.`);return}this.panelElement=this.createPanelStructure(),t.appendChild(this.panelElement),this.contentElement=this.panelElement.querySelector(".drafter-debug-content"),this.headerBar=new Be(""),this.footerBar=new ze,this.testingPanel=new qe,this.attachEventHandlers()}setHeaderTitle(t){this.headerBar&&this.headerBar.setTitle(t)}setRoute(t){this.footerBar&&this.footerBar.setRoute(t)}createPanelStructure(){let t=document.createElement("div");t.className="drafter-debug-panel",t.id="drafter-debug-panel";let n=x("div",{class:"drafter-debug-panel",children:[x("div",{class:"drafter-debug-header-left",children:[x("div",{children:[x("div",{class:"drafter-debug-header-title",children:"Debug Panel"}),x("div",{class:"drafter-debug-header-subtitle"})]}),x("div",{class:"drafter-debug-header-buttons",children:[x("a",{href:"#drafter-debug-warnings",children:"Warnings"})," |",x("a",{href:"#drafter-debug-errors",children:"Errors"})," |",x("a",{href:"#drafter-debug-current-route",children:"Current Route"})," ","|",x("a",{href:"#drafter-debug-state",children:"State"})," |",x("a",{href:"#drafter-debug-history",children:"History"})," |",x("a",{href:"#drafter-debug-routes",children:"Routes"})," |",x("a",{href:"#drafter-debug-events",children:"Events"})]})]}),this.createActionButtons(),x("div",{class:"drafter-debug-content",children:[x("div",{class:"drafter-debug-section",id:"drafter-debug-routes",children:[x("div",{class:"drafter-debug-section-header",children:x("h4",{children:"Registered Routes"})}),x("div",{id:"drafter-routes-list"})]}),x("div",{class:"drafter-debug-section",id:"drafter-debug-current-route"}),x("div",{class:"drafter-debug-section",id:"drafter-debug-state",children:[x("div",{class:"drafter-debug-section-header",children:x("h4",{children:"Current State"})}),x("div",{id:"drafter-debug-current-state-content"})]}),x("div",{class:"drafter-debug-section",id:"drafter-debug-history"}),x("div",{class:"drafter-debug-section",id:"drafter-debug-tests",children:[x("div",{class:"drafter-debug-section-header",children:x("h4",{children:"Your Tests"})}),x("div",{id:"drafter-debug-current-tests-content",children:[x("div",{id:"drafter-debug-current-tests-summary"}),x("br",{}),x("strong",{children:"Details: "}),x("div",{id:"drafter-debug-current-tests-content-list"})]})]}),x("div",{class:"drafter-debug-section",id:"drafter-debug-errors"}),x("div",{class:"drafter-debug-section",id:"drafter-debug-events"})]})]});return t.appendChild(n),t}createActionButtons(){return x("div",{class:"drafter-debug-actions",children:[x("button",{id:"drafter-home-btn",title:k("button.home.tooltip"),class:"drafter-home-button",children:[k("icon.home")," ",k("button.home")]}),x("button",{id:"debug-reset-btn",title:k("button.reset.tooltip"),class:"drafter-reset-button",children:[k("icon.reset")," ",k("button.reset")]})]})}attachEventHandlers(){document.querySelectorAll(".drafter-home-button").forEach(n=>{n.addEventListener("click",e=>{e.preventDefault(),this.clientBridge.goto("index")})})}renderState(t){let n=document.getElementById("drafter-debug-current-state-content");if(!n)throw new Error("DebugPanel: State section not found.");let e=x("div",{class:"state-content",children:x("div",{dangerouslySetInnerHTML:{__html:t}})});n.replaceChildren(e)}renderRoute(t,n){let e=document.getElementById("drafter-routes-list");if(!e)throw new Error("DebugPanel: Routes section not found.");let i=x("div",{class:"route-signature",children:[x("strong",{children:t}),":",x("pre",{children:n})]});e.appendChild(i)}handleEvent(t){switch(this.events.push(t),t.data?.event_type){case"RouteAdded":this.renderRoute(t.data.url,t.data.signature);break;case"UpdatedState":this.currentState=t.data.html,this.renderState(this.currentState);break;case"TestCaseEvent":this.testingPanel?.renderTest(t.data),this.testingPanel?.updateTestSummary();break;default:break}}};function _r(r){if(P.builtinFiles===void 0||P.builtinFiles.files[r]===void 0)throw"File not found: '"+r+"'";return P.builtinFiles.files[r]}var Qe="background-color: #f0f0f0; padding: 4px; border: 1px solid lightgrey; margin: 0px";function kn(){if(typeof P>"u")throw console.error("Skulpt (global `Sk`) not found. Ensure skulpt.js and skulpt-stdlib.js are loaded before drafter.js (served from your Python assets or a CDN)."),new Error("Skulpt not found");typeof P.environ>"u"&&(P.environ=new P.builtin.dict),P.environ.set$item(new P.builtin.str("DRAFTER_SKULPT"),P.builtin.bool.true$),P.configure({read:_r,__future__:P.python3}),P.inBrowser=!1,typeof P.console>"u"&&(P.console={}),P.console.drafter={},P.console.printPILImage=function(r){document.body.append(r.image)},P.console.plot=function(r){let t=document.createElement("div");return document.body.append(t),{html:[t]}},P.console.getWidth=function(){return 300},P.console.getHeight=function(){return 300},P.console.drafter.handleError=function(r,t){document.body.innerHTML=`<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div><pre style="${Qe}">${r}: ${t}</pre></div>`},P.DebugPanel=Ye}function Xr(r,t){P.builtinFiles===void 0&&(P.builtinFiles={files:{}}),P.builtinFiles.files[r]=t}async function Dt(r,t="main",n=!0){Xr(t+".py",r);try{return P.misceval.asyncToPromise(()=>P.importMainWithBody(t,!1,r,!0)).then(e=>(console.log(e.$d),e)).catch(e=>{if(!n)throw At(e,t+".py",r,!1);Rn(e,t+".py",r)})}catch(e){if(!n)throw At(e,t+".py",r,!1);Rn(e,t+".py",r)}}function Rn(r,t,n){console.error(r),console.error(r.args.v[0].v),document.body.innerHTML=["<h1>Error Running Site!</h1><div>There was an error running your site. Here is the error message:</div><div>",qr(r,t,n),"</div>"].join(`
`)}function qr(r,t,n){let e=r.tp$name,i="runtime";return At(r,t,n)}function Pn(r,t,n){return r.traceback.reverse().map(e=>{if(!e)return"??";let i=e.lineno,s=`File <code class="filename">"${e.filename}"</code>, `,o=`on line <code class="lineno">${i}</code>, `,a=e.scope!=="<module>"&&e.scope!==void 0?`in scope ${e.scope}`:"",l="";if(e.source!==void 0)l=`
<pre style="${Qe}"><code>${e.source}</code></pre>`;else if(t===e.filename&&n){let u=n.split(`
`),f=i-1,c=u[f];l=`
<pre style="${Qe}"><code>${c}</code></pre>`}return s+o+a+l})}function Hn(r,t,n){return r.traceback.reverse().map(e=>{if(!e)return"??";let i=e.lineno,s=`File "${e.filename}", `,o=`on line ${i}, `,a=e.scope!=="<module>"&&e.scope!==void 0?`in scope ${e.scope}`:"",l="";if(e.source!==void 0)l=""+e.source;else if(t===e.filename&&n){let u=n.split(`
`),f=i-1;l=u[f]}return s+o+a+l})}function At(r,t,n,e=!0){let i=r.tp$name,s=P.ffi.remapToJs(r.args),o=`${i}: ${s[0]}`,a="";if(i==="TimeoutError"){if(r.err&&r.err.traceback&&r.err.traceback.length){let l=(e?Pn:Hn)(r.err,t,n),u=["Traceback:"];l.length>5?u.push(...l.slice(0,3),`... Hiding ${l.length-3} other stack frames ...,`,...l.slice(-3,-2)):u.push(...l),a=u.join(`
<br>`)}}else r.traceback&&r.traceback.length&&(a=(e?`<strong>Traceback:</strong><br>
`:`Traceback:
`)+(e?Pn:Hn)(r,t,n).join(`
<br>`));return e?`<pre style="${Qe}">${o}</pre>
<br>
${a}
<br>
<div>
    <p><strong>Advice:</strong><br>
    Some common things to check:
    <ul>
    <li>Check your site to make sure it has no errors and runs fine when not deployed.</li>
    <li>Make sure you are not using third party libraries or modules that are not supported (e.g., <code>threading</code>).</li>
    <li>Check that you are correctly referencing any files or images you are using.</li>
    </ul>
    </p>
    </div>`:o+`
`+a}var pa=new Sk.builtin.str("hello");function Yr(r){if(kn(),r.code)return Dt(r.code,"main",r.presentErrors);if(r.url)return fetch(r.url).then(t=>{if(!t.ok)throw new Error("Network response was not ok "+t.statusText);return t.text()}).then(t=>Dt(t,"main"));throw new Error("Either code or url must be provided");console.log("Drafter setup complete.")}return Bn(Qr);})();
//# sourceMappingURL=drafter.js.map