

<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>More Help &#8212; Drafter 1.8.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/cloud.css?v=f9ae72be" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=090ae2a6" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script src="../_static/documentation_options.js?v=82e6e318"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>

    
    
     
        <script src="../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../_static/cloud.base.js"></script>
    

    
     
        <script src="../_static/cloud.js"></script>
    

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Full API Documentation" href="../api/api.html" />
    <link rel="prev" title="Transitioning from Drafter to Flask" href="../reference/flask.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../api/api.html" title="Full API Documentation"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../reference/flask.html" title="Transitioning from Drafter to Flask"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../contents.html">Drafter 1.8.3 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">More Help</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="more-help">
<span id="help"></span><h1>More Help<a class="headerlink" href="#more-help" title="Link to this heading">¶</a></h1>
<section id="actions-after-start">
<h2>Actions After Start<a class="headerlink" href="#actions-after-start" title="Link to this heading">¶</a></h2>
<p>Once you call the <code class="docutils literal notranslate"><span class="pre">start_server()</span></code> function, no other code will run until your website finishes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">drafter</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># These print statements demonstrate when code runs relative to start</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This line will execute before the game starts.&quot;</span><span class="p">)</span>
<span class="n">start_server</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This line will not execute until the game is over.&quot;</span>
</pre></div>
</div>
<p>If you want to have activity in your website, you have to use the <code class="docutils literal notranslate"><span class="pre">route</span></code> decorator to add
routes.</p>
</section>
<section id="circular-reference-errors">
<h2>Circular Reference Errors<a class="headerlink" href="#circular-reference-errors" title="Link to this heading">¶</a></h2>
<p>Drafter does its best to automatically generate unit tests for your code. However, it is not
perfect. One particular issue is if you have a <em>circular reference</em> in your data.
The unit test will seem to randomly have the text “Circular Reference” in it.</p>
<p>Let’s look at an example of how to trigger this issue:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">drafter</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Item</span><span class="p">:</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">previously_seen</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Item&#39;</span><span class="p">]</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">:</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Item</span><span class="p">]</span>

<span class="c1"># ...</span>

<span class="n">first_item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">(</span><span class="s2">&quot;First Item&quot;</span><span class="p">,</span> <span class="p">[])</span>
<span class="n">second_item</span> <span class="o">=</span> <span class="n">Item</span><span class="p">(</span><span class="s2">&quot;Second Item&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">first_item</span><span class="p">])</span>
<span class="n">first_item</span><span class="o">.</span><span class="n">previously_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">second_item</span><span class="p">)</span>
<span class="n">start_server</span><span class="p">(</span><span class="n">State</span><span class="p">([</span><span class="n">first_item</span><span class="p">,</span> <span class="n">second_item</span><span class="p">]))</span>
</pre></div>
</div>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">first_item</span></code> has a reference to the <code class="docutils literal notranslate"><span class="pre">second_item</span></code> and vice versa.
This creates a circular reference between those elements. When Drafter tries
to generate code to construct the instances, it would get stuck in an infinite loop
trying to flatten everything. Instead, it chooses to generate the text <code class="docutils literal notranslate"><span class="pre">&quot;Circular</span> <span class="pre">Reference&quot;</span></code>.</p>
<p>To fix this issue, you should first confirm that you need circular references.
Circular references are extremely useful for a wide variety of purposes, such
as representing a graph. If you do need them, you can manually write the
unit tests for those cases, using the generated ones as a base.
Capture the result of calling your route, and you can then test
individual pieces by inspecting the <code class="docutils literal notranslate"><span class="pre">state</span></code> and <code class="docutils literal notranslate"><span class="pre">content</span></code> of the
resulting <code class="docutils literal notranslate"><span class="pre">Page</span></code> object. See <a class="reference internal" href="testing.html#testing-parts-of-routes"><span class="std std-ref">Testing Parts of Routes</span></a> for more information.</p>
<p>However, it’s also very likely that you do not need circular references,
and you added them by mistake. Review your code carefully to see if you are
accidentally creating circular references. A few ways that this can happen:</p>
<ul class="simple">
<li><p>You are appending a list to itself.</p></li>
<li><p>You set the field of an object to itself.</p></li>
<li><p>You have an inner field or list element that refers to the outer object.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="../contents.html">Page contents</a></h3>
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to Install Drafter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/quickstart.html">Drafter Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workbook/index.html">Workbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Longer Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">Drafter Documentation for Students</a></li>
<li class="toctree-l1"><a class="reference internal" href="html.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="styling.html">Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Drafter Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">Reference Lists</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">More Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#actions-after-start">Actions After Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#circular-reference-errors">Circular Reference Errors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">Full API Documentation</a></li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="../reference/flask.html"
                          title="Previous page">&larr; Transitioning from Drafter to Flask</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="../api/api.html"
                          title="Next page">&rarr; Full API Documentation</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/students/help.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../api/api.html" title="Full API Documentation"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../reference/flask.html" title="Transitioning from Drafter to Flask"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../contents.html">Drafter 1.8.3 documentation</a> &#187;</li>

        <li class="nav-item nav-item-this"><a href="">More Help</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, acbart &amp; nazim.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>